<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Presentation Ninja</title>
    <meta charset="utf-8" />
    <meta name="author" content="Yihui Xie" />
    <meta name="author" content="Garrick Aden-Buie" />
    <meta name="date" content="2022-12-16" />
    <script src="libs/header-attrs-2.18/header-attrs.js"></script>
    <link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
    <script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
    <link rel="stylesheet" href="Curso_R.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

layout: true





&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/BrasaoGoverno.png?raw=true" style="left: 5px; top: 5px; position: absolute" width="7.5%" height="13%"&gt;

 
 &lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/UCS.PNG?raw=true" style="right: 20px; top: 5px; position: absolute" width="6%" height="14%"&gt;

 &lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaVertical.PNG?raw=true" style="right: 0px; top: 0px; position: absolute" width="1.5%" height="99.7%"&gt;
 
  &lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaHorizontal.PNG?raw=true" style="left: -1px; bottom: 0px; position: absolute" width="99.3%" height="2.5%"&gt;

---
class: center, middle

# Introdução ao Software R e ao R Markdown

Luiz Carlos Santana Filho
&lt;p style="font-size: 12px"&gt;
Diretoria de Planejamento Social&lt;/p&gt;
&lt;p style="font-size: 12px"&gt;Superintendência de Planejamento Estratégico&lt;/p&gt;
&lt;p style="font-size: 15px"&gt;Secretaria do Planejamento&lt;/p&gt;

&lt;p style="color: blue; font-size: 14px; margin: 5px"&gt;&lt;i&gt;luizcarlos.santanafilho@seplan.ba.gov.br&lt;/i&gt;&lt;/p&gt;

[https://github.com/lcsfilho](https://github.com/lcsfilho)


 &lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/FigR_RStudio_RMarkdown.png?raw=true" style="left: auto; right=auto; bottom:-100px; position: relative" width="40%" height="1.7%"&gt;

---
&lt;div class="titulo" position="Center"&gt;Introdução ao Software R e ao R Markdown&lt;/div&gt;


&lt;br&gt;

# Índice


-  Índice
-  O que é o `R`?
-  Definições
-  Iniciação
-  Dados no `R`
-  Importando dados no R
-  Carregando dados
-  Análise descritiva (unidimensional)
-  Pacote Tidyverse
-  Referências


---

layout: true

&lt;div class="titulo" position="Center"&gt;Introdução ao Software R e ao R Markdown&lt;/div&gt;


&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/BrasaoGoverno.png?raw=true" style="left: 5px; top: 5px; position: absolute" width="7.5%" height="13%"&gt;

 
&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/UCS.PNG?raw=true" style="right: 20px; top: 5px; position: absolute" width="6%" height="14%"&gt;

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaVertical.PNG?raw=true" style="right: 0px; top: 0px; position: absolute" width="1.5%" height="99.7%"&gt;
 
&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaHorizontal.PNG?raw=true" style="left: -1px; bottom: 0px; position: absolute" width="99.3%" height="2.5%"&gt;

---
&lt;center&gt;&lt;font size="6"&gt;Bibliografia básica&lt;/font&gt;&lt;/center&gt;

&lt;div class="container"&gt;


&lt;img src="https://images-submarino.b2w.io/produtos/134528441/imagens/livro-r-para-data-science-importe-arrume-transforme-visualize-e-modele-dados/134528441_1_large.jpg" style="left: auto; top: 25%; position: absolute" width="20%"&gt;


&lt;img src="http://www.cookbook-r.com/r_graphics_cookbook.png" style="left: 41%; top: 25%; position: absolute" width="18%"&gt;


&lt;img src="https://bookdown.org/yihui/rmarkdown-cookbook/images/cover.png" style="right: 10%; top: 25%; position: absolute" width="12.5%"&gt;


&lt;div class="bibliografia"&gt;

.pull-left[
&gt; [R para Data Science](https://www.amazon.com.br/para-data-science-transforme-visualize/dp/8550803243/ref=asc_df_8550803243/?tag=googleshopp00-20&amp;linkCode=df0&amp;hvadid=379736468109&amp;hvpos=&amp;hvnetw=g&amp;hvrand=4984106143229360944&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=1001533&amp;hvtargid=pla-811060137763&amp;psc=1)&lt;br&gt;
&gt; [R Graphics Cookbook](https://www.amazon.com.br/Graphics-Cookbook-2e-Winston-Chang/dp/1491978600/ref=asc_df_1491978600/?tag=googleshopp00-20&amp;linkCode=df0&amp;hvadid=379787555408&amp;hvpos=&amp;hvnetw=g&amp;hvrand=5700521040944184438&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=1001533&amp;hvtargid=pla-422014417858&amp;psc=1/)&lt;br&gt;
&gt; [R Markdown Cookbook (WEB)](https://bookdown.org/yihui/rmarkdown-cookbook/)&lt;br&gt;
&gt; [R Markdown Cookbook (PDF)](https://bookdown.org/yihui/rmarkdown-cookbook/rmarkdown-cookbook.pdf)&lt;br&gt;
&gt; [Ciência de Dados em R - Curso R](https://livro.curso-r.com/)

]

.pull-right[
&gt; [Cookbook for R](http://www.cookbook-r.com/)&lt;br&gt;
&gt; [Aprendendo R - Fiocruz](http://www.de.ufpb.br/~tatiene/Disciplinas/2014.2/LivroR/aprendendo_r.pdf)&lt;br&gt;
&gt; [An Introduction to R](https://cran.r-project.org/doc/manuals/R-intro.pdf)&lt;br&gt;
&gt; [Using R for Data Analysis and Graphics](https://cran.r-project.org/doc/contrib/usingR.pdf)&lt;br&gt;
&gt; [Visualização de dados com ggplot2](http://leg.ufpr.br/~walmes/cursoR/data-vis/slides/08-ggplot2.pdf)&lt;br&gt;

]


[Livros R gratuitos para download](https://producaoanimalcomr.wordpress.com/2015/12/15/livros-r-gratuitos-para-downloads/)


&lt;/div&gt;
&lt;/div&gt;
---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/R_logo.png?raw=true)
background-size: 45px
background-position: 50% 16%

# O que é o `R`?


- R é uma linguagem e um ambiente de desenvolvimento integrado, para cálculos estatísticos e gráficos.

- Foi criada originalmente por [_Ross Ihaka_](https://pt.wikipedia.org/w/index.php?title=Ross_Ihaka&amp;action=edit&amp;redlink=1) e por [_Robert Gentleman_](https://pt.wikipedia.org/w/index.php?title=Robert_Gentleman&amp;action=edit&amp;redlink=1) no departamento de Estatística da universidade de Auckland, Nova Zelândia, e foi desenvolvido por um esforço colaborativo de pessoas em vários locais do mundo.

- O nome R provêm em parte das iniciais dos criadores e também de um jogo figurado com a linguagem `S` (da Bell Laboratories, antiga AT&amp;T).

- R é uma linguagem e ambiente similar ao [S](https://pt.wikipedia.org/wiki/S_(linguagem_de_programa%C3%A7%C3%A3o) - pode ser considerado uma implementação distinta do S; embora com importantes diferenças, muitos códigos escritos para o S rodam inalterados no R. A implementação comercial de S é [S-PLUS](https://www.splus.iag.usp.br/).

- O código fonte do `R` está disponível sob a licença [GNU](https://www.gnu.org/) [GPL](https://pt.wikipedia.org/wiki/GNU_General_Public_License) e as versões binárias pré-compiladas são fornecidas para Windows, Macintosh, e muitos sistemas operacionais Unix/Linux.

- `R` é também altamente expansível com o uso dos pacotes, que são bibliotecas para funções específicas ou áreas de estudo específicas.

[Blog Software Livre na Educação](https://www.ufrgs.br/soft-livre-edu/software-educacional-livre-na-wikipedia/r-linguagem-de-programacao/)

---
&lt;div class="Ross_Ihaka"&gt;
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Ross_Ihaka_%285189180796%29.jpg/220px-Ross_Ihaka_%285189180796%29.jpg" style="left: 17%; top: 30%; position: absolute" width="35%" height="40%" &gt;
&lt;p&gt;Ross Ihaka&lt;/p&gt;
&lt;/div&gt;


&lt;div class="Robert_Gentleman"&gt;
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Rober_Gentleman.png/220px-Rober_Gentleman.png" style="right: 16%; top: 30%; position: absolute"width="23%" height="40%" &gt;
&lt;p&gt;Robert Gentleman&lt;/p&gt;
&lt;/div&gt;

---
&lt;center&gt;
&lt;figure&gt;
&lt;img src="https://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-800wi" style="left: 25%; top: 20%; position: absolute"width="50%"&gt;
&lt;figcaption&gt;Número de pacotes R publicados no Repositório CRAN&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;/center&gt;

---
# Definições

* Objeto: `R` é uma linguagem orientada a objetos e tudo em R é um objeto. Trata-se de uma referência a um local da memória que possui um valor.
Por exemplo, um único número é um objeto, uma variável é um objeto, a saída é um objeto, um conjunto de dados é um objeto que é, por si próprio, uma coleção de objetos, etc.

* Vetor: Uma coleção de um ou mais objetos do mesmo tipo. Por exemplo, todos os números ou todos os caracteres.

* Função: Um conjunto de instruções realizadas em um ou mais objetos. Funções são normalmente utilizadas para executar tarefas específicas e comuns, que normalmente exigiriam muitas instruções.
Por exemplo, a função `mean()` (média) é usada para calcular a média aritmética dos valores de um vetor numérico.

* Argumento: Informação específica (na forma name = value) passada para uma função para determinar como ela deve desempenhar a sua tarefa. Por exemplo, a função `mean()` requer, pelo menos, um argumento - o nome de um objeto que contém os valores a partir dos quais a média será calculada.

* Operador: Um símbolo com significado pré-definido. Os operadores
comuns incluem +, −, ∗, /, ˆ, e os operadores lógicos
&lt;, &gt;, &lt;=, &gt;=, ==, !=, &amp;&amp;, ||.

&lt;a name=cite-andreluis&gt;&lt;/a&gt;[Maia (2016)](#bib-andreluis)

---
# Iniciação

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/TelaR.PNG?raw=true" style="right: 3%; top: 35%; position: absolute"width="45%"&gt;


1. Acesse o endereço https://www.r-project.org e baixe o `R` por uma das URLs disponíveis (CRAN&lt;sup&gt;1&lt;/sup&gt; Mirrors)
1. Instale o software `R` (`R-Gui`)
1. Execute o software `R` (`R-Gui`)

.pull-left[
"O sistema é formado por um programa básico (`R-Gui`) e muitos pacotes com procedimento adicionais. Tudo é gratuito e com código livre, voltado para comunidade acadêmica."
&lt;a name=cite-lingR&gt;&lt;/a&gt;([INE/UFSC, 2013](#bib-lingR))

Ao executar, o software `R` abre o console com informações e avisos, seguidos pelo prompt de comando (&lt;font color="#F2A025"&gt; &gt; &lt;/font&gt;).
]

.footnote[
[1] [Comprehensive R Archive Network](https://cran.r-project.org/mirrors.html)
]

---
## Explorando o R

Operações básicas no R

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/Operacoes_R.PNG?raw=true" style="right: auto; top: 35%; position: absolute"width="40%"&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
O símbolo &lt;font color="#F2A025"&gt; # &lt;/font&gt; é usado para comentário no R.



---
## Criando vetores

Criando uma sequência de números de 0 a 20:


```r
x = 0 : 20
x
##  [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
```

Acessando o 6º elemento do vetor:


```r
x [6]
## [1] 5
```

Alterando dados:


```r
x [1] = 20
x
##  [1] 20  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
```
---
Há outra forma de criar vetores, utilizando a função `c()`.
Vamos gerar uma sequência numérica de 0 a 10.


```r

x = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
x
##  [1]  0  1  2  3  4  5  6  7  8  9 10
```

Também podemos criar vetor de caracteres:


```r
y = c("A", "B", "C", "D", "E")
y
## [1] "A" "B" "C" "D" "E"
```

Criando uma matriz:

```r
matriz &lt;- matrix(c(1, 2, 3, 4), nrow = 2, ncol = 2)
matriz
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
```
---
Para criar uma lista:



```r
list(2, 5, "A", TRUE, FALSE)
## [[1]]
## [1] 2
## 
## [[2]]
## [1] 5
## 
## [[3]]
## [1] "A"
## 
## [[4]]
## [1] TRUE
## 
## [[5]]
## [1] FALSE
```

Também podemos trabalhar com `data frames`, que são objetos semelhantes a uma matriz, mas as suas colunas têm nomes e podem conter tipos de dados diferentes.

---
## Gráficos

Para criar um gráfico, precisamos dos dados. Na seção anterior, criamos uma sequência numérica atribuída à variável `x`. Agora, criaremos a varável `y` para fazer par com a variável `x`.


```r
y = 5 + 2*x^2
plot(x,y)
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/matematica.gif?raw=true)
background-size: 35%
background-position: 85% 80%

## Estatísticas

.pull-left[
Funções isoladas:

```r
mean(x)      #Média
## [1] 5
median(x)    #Mediana
## [1] 5
quantile(x)  #Quartis
##   0%  25%  50%  75% 100% 
##  0.0  2.5  5.0  7.5 10.0
var(x)       #Variância
## [1] 11
sd(x)        #Desvio Padrão
## [1] 3.316625
min(x)       #Mínimo
## [1] 0
max(x)       #Máximo
## [1] 10
sum(x)       #Somatório
## [1] 55
```
]

.pull-right[
Função summary()

```r
summary(x)
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     0.0     2.5     5.0     5.0     7.5    10.0
```
]

---
## Pacotes (Bibliotecas)

- Um `pacote` é uma coleção de funções, dados e documetações, que ampliam as funcionalidades básicas do `R`.

- A instalação básica do `R` já contém vários pacotes.

- Há milhares de pacotes gratúitos para instalação, que não fazem parte da instalção básica do `R`.


Pacotes podem ser instalados e carregados pelas funções `install.packages()` e `library()`, respectivamente.

Exemplo: Vamos instalar e carregar um pacote de gráficos chamado `ggplot`.


```r
install.packages("ggplot2")
library(ggplot2)
```

Repare que o nome do pacote deve estar escrito entre aspas para a instalação, mas, para carregar, as aspas devem ser dispensadas.

Ao instalar um pacote, este deve ser carregado (`library()`) toda vez que o `R` for iniciado.

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/Help.PNG?raw=true)
background-size: 41%
background-position: 50% 88%

## Help

Para obter ajuda sobre qualquer função, basta escrever no `console` o nome da função (ou do pacote) precedido de uma interrogação: `?ggplot`. A outra opção é `help(ggplot)`.

Também podemos acessar a área de Help do `R Studio` e escrever o nome da função no campo indicado na figura


---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/RStudio.jpg?raw=true)
background-size: 150px
background-position: 50% 16%

## R Studio

O [R Studio ](https://posit.co/) "é um software livre de ambiente de desenvolvimento integrado para `R`, uma linguagem de programação para gráficos e cálculos estatísticos."  &lt;a name=cite-RStudio&gt;&lt;/a&gt;([Wikipédia, 2017](https://pt.wikipedia.org/wiki/RStudio)). É uma interface para uso do `R` e deve ser instalado após a instalação do `R`. Sua instalação se dá pelo endereço https://posit.co/.

&lt;div style="float:left"&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Scripts&lt;br&gt;
Funções&lt;br&gt;
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
Objetos&lt;br&gt;
Valores&lt;br&gt;
Funções ativas
&lt;/div&gt;


&lt;div style="float:right"&gt;Console&lt;br&gt;
Terminal&lt;br&gt;&lt;br&gt;&lt;br&gt;
  Background Jobs&lt;br&gt;&lt;br&gt;&lt;br&gt;
Files&lt;br&gt;
Plot&lt;br&gt;
Packages&lt;br&gt;&lt;br&gt;&lt;br&gt;
Help&lt;br&gt;
Viewer&lt;/div&gt;

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0032.gif?raw=true" style="left: 15%; top: 60%; position: absolute"width="5%"&gt;


&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0032.gif?raw=true" style="left: 15%; top: 85%; position: absolute"width="5%"&gt;


&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/faa0293cb8164941fa87551756cf3ea421c867ef/Curso%20R/fig/telaRStudio.PNG?raw=true" style="left: 20%; top: 38%; position: absolute"width="60%"&gt;

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0044.gif?raw=true" style="left: 80%; top: 50%; width=5%; position: absolute"&gt;


&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0044.gif?raw=true" style="left: 80%; top: 80%; width=5%; position: absolute"&gt;

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/giphy.gif?raw=true)
background-size: 35%
background-position: 90% 50%

## Vantagens do RStudio


- Highlight do código;

- Autocomplete;

- Match automático de parenteses e chaves;

- Interface intuitiva para objetos, gráficos e script;

- Criação de "projetos" com interface para controle de versão;

- Facilidade na criação de pacotes;

- Interação com HTML, entre outras.


[Análise Real - Economia: Teoria, Prática e Política](https://analisereal.com/2015/01/20/r-e-rstudio-2/)

---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/RCloud.PNG?raw=true)
background-size: 71%
background-position: 50% 92%

## R Studio Cloud

&lt;img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/positCloud.svg?raw=true" style="left: 23%; top: 16%; position: absolute"width="20%"&gt;

Pode ser acessado a partir de qualquer computador ligado à internet; pode ser acessado pelo celular; todos os pacotes já estão instalados; possibilidade de compartilhar projetos; opção de usar gratuitamente, porém com limitações de memória e tempo de uso por mês.

---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/TabelaDados.PNG?raw=true)
background-size: 25%
background-position: 50% 55%

# Dados no `R`

Vamos criar um conjunto de dados aleatório de 8 pessoas, com 4 variáveis: peso, altura, idade e renda. Perceba que a renda de uma pessoa não foi medida (dado _missing_).

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;


```r
#Criando os vetores de variáveis pela função c()
peso = c(55, 70, 76, 80, 62, 51, 68, 74)
idade = c(27, 40, 36, 60, 42, 24, 35, 39)
altura = c(1.60, 1.72, 1.65, 1.75, 1.55, 1.63, 1.72, 1.58)
renda = c(2000, 5000, 4000, 3000, 1500, NA, 7000, 4500)
```

---
## Dados no `R`

A depender da função a presença do `NA` pode causar problemas


```r
sum(renda)
## [1] NA
```


```r
mean(renda)
## [1] NA
```


```r
min(renda)
## [1] NA
```



```r
summary(renda)
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
##    1500    2500    4000    3857    4750    7000       1
```
---
## Dados no `R`

Usamos a função `c()` (concatenar) para agrupar os dados, criando vetores separados. Agora, usaremos as funções `cbind` (&lt;u&gt;c&lt;/u&gt;olumn) e `rbind` (&lt;u&gt;r&lt;/u&gt;ow) para concatenar os vetores em linhas e colunas.

Podemos agrupar as 4 variáveis em colunas, da seguinte forma:


```r
dados_pessoas = cbind(peso, idade, altura, renda)
dados_pessoas
##      peso idade altura renda
## [1,]   55    27   1.60  2000
## [2,]   70    40   1.72  5000
## [3,]   76    36   1.65  4000
## [4,]   80    60   1.75  3000
## [5,]   62    42   1.55  1500
## [6,]   51    24   1.63    NA
## [7,]   68    35   1.72  7000
## [8,]   74    39   1.58  4500
```

---
## Dados no `R`

Podemos recuperar dados de colunas, linhas, dados individuais ou um conjunto de dados selecionados.

Acessando dados da 1ª coluna:

.pull-left[

```r
dados_pessoas[,1]
## [1] 55 70 76 80 62 51 68 74
```

Acessando dados da 3ª linha:

```r
dados_pessoas[3,]
##    peso   idade  altura   renda 
##   76.00   36.00    1.65 4000.00
```

Acessando dado da 2ª linha e 3ª coluna:

```r
dados_pessoas[2,3]
## altura 
##   1.72
```
]

.pull-right[
Acessando dados das linhas 2 a 4, na coluna 1:

```r
dados_pessoas[2:4,1]
## [1] 70 76 80
```

Acessando todos os dados das linhas 1, 2 e 4:

```r
dados_pessoas[c(1, 2, 4),]
##      peso idade altura renda
## [1,]   55    27   1.60  2000
## [2,]   70    40   1.72  5000
## [3,]   80    60   1.75  3000
```
]
---
## Dados no `R`
Função `matrix()`
.pull-left[
Criando matriz de dimensão 8 x 4:


```r
dados_pessoas.M = matrix(nrow = 8, ncol = 4)
dados_pessoas.M
```

```
##      [,1] [,2] [,3] [,4]
## [1,]   NA   NA   NA   NA
## [2,]   NA   NA   NA   NA
## [3,]   NA   NA   NA   NA
## [4,]   NA   NA   NA   NA
## [5,]   NA   NA   NA   NA
## [6,]   NA   NA   NA   NA
## [7,]   NA   NA   NA   NA
## [8,]   NA   NA   NA   NA
```
]


.pull-right[
Vamos alimentar a matriz com os dados das pessoas


```r
dados_pessoas.M[,1] = c(55, 70, 76, 80, 62, 51, 68, 74)
dados_pessoas.M[,2] = c(27, 40, 36, 60, 42, 24, 35, 39)
dados_pessoas.M[,3] = c(1.60, 1.72, 1.65, 1.75, 1.55, 1.63, 1.72, 1.58)
dados_pessoas.M[,4] = c(2000, 5000, 4000, 3000, 1500, NA, 7000, 4500)
dados_pessoas.M
```

```
##      [,1] [,2] [,3] [,4]
## [1,]   55   27 1.60 2000
## [2,]   70   40 1.72 5000
## [3,]   76   36 1.65 4000
## [4,]   80   60 1.75 3000
## [5,]   62   42 1.55 1500
## [6,]   51   24 1.63   NA
## [7,]   68   35 1.72 7000
## [8,]   74   39 1.58 4500
```

]
---
## Dados no `R`
Função `data.frame()`

O _Data Frame_ é uma estrutura semelhante à uma matriz, mas com cada coluna sendo tratada separadamente. Em um _Data Frame_, todos osa dados dentro da mesma coluna serão forçados a serem do mesmo tipo. Podemos ver o _Data Frame_ como uma "tabela" formada por um conjunto de dados, podendo ser de tipos diferentes entre as colunas, sendo que esses tipos podem ser variáveis numéricas, _strings_, nominais (fatores), datas etc.


```r
dados_pessoas.DF = data.frame(peso, idade, altura, renda)
dados_pessoas.DF
##   peso idade altura renda
## 1   55    27   1.60  2000
## 2   70    40   1.72  5000
## 3   76    36   1.65  4000
## 4   80    60   1.75  3000
## 5   62    42   1.55  1500
## 6   51    24   1.63    NA
## 7   68    35   1.72  7000
## 8   74    39   1.58  4500
```
---
class: center
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/Exercitar1.gif?raw=true)
background-size: 30%
background-position: 50% 70%

&lt;font color="#256BC1", size="7", face="sans-serif"&gt; &lt;b&gt;Bora trabalhar!&lt;/b&gt; &lt;/font&gt;

---
# Importando dados no R
.pull-left[
Com o `R`, podemos importar dados de diversos formatos (_xls_, _xlsx_, _CSV_, _txt_, _SAS_, _SPSS_ etc). Devemos seguir os seguintes passos:
1. Saber o caminho do arquivo
1. Usar a função `setwd()` para alterar o diretório de trabalho
1. Instalar o  _tydeverse_, que é um pacote guarda-chuva (conjunto de pacotes) que auxilia no ciclo da ciência de dados (importar, arrumar, transformar, visualizar e modelar)

A sua pasta de trabalho pode ser encontrada com o comando:


```r
getwd()
## [1] "F:/Curso de R/Introducao_R/Curso R"
```

]

.pull-right[

Para definir a pasta de trabalho, por exemplo, use:




```r
setwd("C:/Documentos/Curso R")
```
Atenção: Atente para as barras invertidas ("/") no endereço do arquivo. Ao copiar e colar o endereço, as barras vêem inclinadas para esquerda ("C:\Documentos\Curso R").


Para instalar o `tidyverse`:


```r
install.packages("tidyverse")
```

Carregue o `tideverse`


```r
library(tidyverse)
```
]

---
## Importando dados no R


O `Tidyverse` agrega um conjunto de 30 pacotes. São eles:


```r
tidyverse::tidyverse_packages()
##  [1] "broom"         "cli"           "crayon"        "dbplyr"       
##  [5] "dplyr"         "dtplyr"        "forcats"       "ggplot2"      
##  [9] "googledrive"   "googlesheets4" "haven"         "hms"          
## [13] "httr"          "jsonlite"      "lubridate"     "magrittr"     
## [17] "modelr"        "pillar"        "purrr"         "readr"        
## [21] "readxl"        "reprex"        "rlang"         "rstudioapi"   
## [25] "rvest"         "stringr"       "tibble"        "tidyr"        
## [29] "xml2"          "tidyverse"
```

O pacote `readr` importa arquivos de texto, como `.txt` ou `.csv`.

Já o pacote `readxl` é utilizado para ler planilhas do Excel, basta utilizar a função `read_excel()`.

O pacote `haven` é usado para ler arquivos gerados por outros sotwares, como  `SPSS`, `SAS` e `STATA`.

&lt;a name=cite-CursoR&gt;&lt;/a&gt;[curso-r (2022)](https://livro.curso-r.com)

---
## Importando dados no R

Mas antes do `tideyverse`, vamos falar um pouco de alguns pacotes de leitura de dados já presentes na instalação básica do `R`. Um desses pacotes é o `utils`, que possui recursos para leitura de diversos arquivos, inclusive aqueles que estão na internet.

Algumas de suas funções são: `read.table` e `read.csv`.

Por padrão, o `R` considera que os dados estão separados por tabulação e o separador de decimais é o ponto.

Se os dados estiverem separados por ":" e o separador decimal for ",", os argumentos `sep` e `dec` da função serão:


```r
read.table("dados.csv", head=TRUE, sep=":", dec=",")
```
ou

```r
read.csv("dados.csv", head=TRUE, sep=":", dec=",")
```

Ou podemo ler diretamente na internet

```r
read.table("https://raw.githubusercontent.com/lcsfilho/Introducao_R/master/Curso%20R/bd/escolas.txt",
           sep="|", dec=",")
```
---
## Importando dados no R

O pacote `foreign`, também presente na distribuição base do `R`, possui diversas funções de importação. Para isso, basta carregar o pacote:



```r
library(foreign)
```

Algumas funções para importação de dados no `R`:

.left-column[
- read.dbf()

- read.epiinfo()

- read.mtp()

- read.S()

- read.spss()

- read.dta()

- read.xport()
]


.right-column[

para arquivos DBASE

para arquivos do Epi Info

para arquivos do Minitab

para arquivos do S-Plus

para dados do SPSS

para dados do Stata

para dados do SAS

]

---
## Importando dados no R
Se o arquivo `.sav` está na sua pasta de trabalho:


```r
read.spss("escolas.sav")
```

Caso contrário, localize o arquivo com a função:


```r
file.chose()
```

O `R` retorna o caminho para o arquivo, por exemplo:


```r
"F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.sav"
```

Então, use (com `to.data.frame = TRUE` para retornar um `data frame`)


```r
dados.escola = read.spss("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.sav", to.data.frame = TRUE)
```

Assim, criamos uma variável chamada `dados.escola`, que recebe o banco de banco de dados `escola.sav`

---
## Importando dados no R

Para inspecionar a estrutura do conjunto de dados, use:

```r
str(dados.escola)
```

```
## 'data.frame':	62 obs. of  166 variables:
##  $ NU_ANO_CENSO                 : num  2015 2015 2015 2015 2015 ...
##  $ CO_ENTIDADE                  : num  12133221 12132225 12131229 12130222 12129224 ...
##  $ NO_ENTIDADE                  : chr  "ESC ESTELA PEREIRA DOS SANTOS               " "ESC QUINTAIS FLORESTAIS                     " "ESC INDIGENA SHANENAWA                      " "ESC INDIGENA PEKURUNI SHANENAWA             " ...
##  $ CO_ORGAO_REGIONAL            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ TP_SITUACAO_FUNCIONAMENTO    : num  1 4 1 1 1 1 4 2 2 2 ...
##  $ DT_ANO_LETIVO_INICIO         : chr  "23/03/2015" "          " "02/04/2015" "02/04/2015" ...
##  $ DT_ANO_LETIVO_TERMINO        : chr  "18/12/2015" "          " "31/12/2015" "31/12/2015" ...
##  $ CO_REGIAO                    : num  1 1 1 1 1 1 1 1 1 1 ...
##  $ CO_MESORREGIAO               : num  1202 1202 1201 1201 1202 ...
##  $ CO_MICRORREGIAO              : num  12005 12005 12002 12002 12003 ...
##  $ CO_UF                        : num  12 12 12 12 12 12 12 12 12 12 ...
##  $ CO_MUNICIPIO                 : num  1200252 1200252 1200302 1200302 1200344 ...
##  $ CO_DISTRITO                  : num  1.2e+08 1.2e+08 1.2e+08 1.2e+08 1.2e+08 ...
##  $ TP_DEPENDENCIA               : num  3 3 2 2 3 2 2 3 2 2 ...
##  $ TP_LOCALIZACAO               : num  2 2 2 2 1 2 2 2 2 2 ...
##  $ TP_CATEGORIA_ESCOLA_PRIVADA  : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_CONVENIADA_PP             : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ TP_CONVENIO_PODER_PUBLICO    : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_MANT_ESCOLA_PRIVADA_EMP   : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_MANT_ESCOLA_PRIVADA_ONG   : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_MANT_ESCOLA_PRIVADA_SIND  : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_MANT_ESCOLA_PRIVADA_SIST_S: num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_MANT_ESCOLA_PRIVADA_S_FINS: num  NA NA NA NA NA NA NA NA NA NA ...
##  $ CO_ESCOLA_SEDE_VINCULADA     : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ CO_IES_OFERTANTE             : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ TP_REGULAMENTACAO            : num  2 NA 2 2 2 2 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_PREDIO_ESCOLAR : num  1 NA 1 1 1 1 NA NA NA NA ...
##  $ TP_OCUPACAO_PREDIO_ESCOLAR   : num  1 NA 1 1 1 1 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_SALAS_EMPRESA  : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_SOCIOEDUCATIVO : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_UNID_PRISIONAL : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_PRISIONAL_SOCIO: num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_TEMPLO_IGREJA  : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_CASA_PROFESSOR : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_GALPAO         : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ TP_OCUPACAO_GALPAO           : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ IN_LOCAL_FUNC_SALAS_OUTRA_ESC: num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LOCAL_FUNC_OUTROS         : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_PREDIO_COMPARTILHADO      : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_AGUA_FILTRADA             : num  1 NA 1 1 1 1 NA NA NA NA ...
##  $ IN_AGUA_REDE_PUBLICA         : num  0 NA 0 0 1 0 NA NA NA NA ...
##  $ IN_AGUA_POCO_ARTESIANO       : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_AGUA_CACIMBA              : num  0 NA 1 0 0 1 NA NA NA NA ...
##  $ IN_AGUA_FONTE_RIO            : num  0 NA 0 1 0 0 NA NA NA NA ...
##  $ IN_AGUA_INEXISTENTE          : num  1 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_ENERGIA_REDE_PUBLICA      : num  1 NA 1 0 1 1 NA NA NA NA ...
##  $ IN_ENERGIA_GERADOR           : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_ENERGIA_OUTROS            : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_ENERGIA_INEXISTENTE       : num  0 NA 0 1 0 0 NA NA NA NA ...
##  $ IN_ESGOTO_REDE_PUBLICA       : num  0 NA 0 0 1 0 NA NA NA NA ...
##  $ IN_ESGOTO_FOSSA              : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_ESGOTO_INEXISTENTE        : num  1 NA 1 1 0 0 NA NA NA NA ...
##  $ IN_LIXO_COLETA_PERIODICA     : num  1 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_LIXO_QUEIMA               : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_LIXO_JOGA_OUTRA_AREA      : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LIXO_RECICLA              : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LIXO_ENTERRA              : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LIXO_OUTROS               : num  0 NA 1 1 0 0 NA NA NA NA ...
##  $ IN_SALA_DIRETORIA            : num  0 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_SALA_PROFESSOR            : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_LABORATORIO_INFORMATICA   : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_LABORATORIO_CIENCIAS      : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_SALA_ATENDIMENTO_ESPECIAL : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_QUADRA_ESPORTES_COBERTA   : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_QUADRA_ESPORTES_DESCOBERTA: num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_QUADRA_ESPORTES           : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_COZINHA                   : num  1 NA 1 1 1 1 NA NA NA NA ...
##  $ IN_BIBLIOTECA                : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_SALA_LEITURA              : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_BIBLIOTECA_SALA_LEITURA   : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_PARQUE_INFANTIL           : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_BERCARIO                  : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_BANHEIRO_FORA_PREDIO      : num  1 NA 1 1 0 1 NA NA NA NA ...
##  $ IN_BANHEIRO_DENTRO_PREDIO    : num  0 NA 0 0 1 0 NA NA NA NA ...
##  $ IN_BANHEIRO_EI               : num  0 NA 0 0 1 0 NA NA NA NA ...
##  $ IN_BANHEIRO_PNE              : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_DEPENDENCIAS_PNE          : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_SECRETARIA                : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_BANHEIRO_CHUVEIRO         : num  0 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_REFEITORIO                : num  0 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_DESPENSA                  : num  0 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_ALMOXARIFADO              : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_AUDITORIO                 : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_PATIO_COBERTO             : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_PATIO_DESCOBERTO          : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_ALOJAM_ALUNO              : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_ALOJAM_PROFESSOR          : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_AREA_VERDE                : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_LAVANDERIA                : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_DEPENDENCIAS_OUTRAS       : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ NU_SALAS_EXISTENTES          : num  2 NA 3 1 2 1 NA NA NA NA ...
##  $ NU_SALAS_UTILIZADAS          : num  2 NA 3 1 3 1 NA NA NA NA ...
##  $ IN_EQUIP_TV                  : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_EQUIP_VIDEOCASSETE        : num  0 NA 0 0 0 0 NA NA NA NA ...
##  $ IN_EQUIP_DVD                 : num  0 NA 0 0 1 1 NA NA NA NA ...
##  $ IN_EQUIP_PARABOLICA          : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_EQUIP_COPIADORA           : num  0 NA 0 0 1 0 NA NA NA NA ...
##  $ IN_EQUIP_RETROPROJETOR       : num  0 NA 0 0 0 1 NA NA NA NA ...
##  $ IN_EQUIP_IMPRESSORA          : num  0 NA 0 0 1 1 NA NA NA NA ...
##   [list output truncated]
##  - attr(*, "codepage")= int 65001
```
---
## Importando dados no R

Para visualizar todo o conjunto de dados, use:


```r
View(dados.escola)
```

Para visualizar as 6 primeiras linhas do conjunto de dados, use:

```r
head(dados.escola)
```

```
##   NU_ANO_CENSO CO_ENTIDADE                                  NO_ENTIDADE
## 1         2015    12133221 ESC ESTELA PEREIRA DOS SANTOS               
## 2         2015    12132225 ESC QUINTAIS FLORESTAIS                     
## 3         2015    12131229 ESC INDIGENA SHANENAWA                      
## 4         2015    12130222 ESC INDIGENA PEKURUNI SHANENAWA             
## 5         2015    12129224 ESC CRECHE IEDA ARAUJO                      
## 6         2015    12128236 ESC FAMILIA AGRICOLA JEAN PIERRE MINGAN     
##   CO_ORGAO_REGIONAL TP_SITUACAO_FUNCIONAMENTO DT_ANO_LETIVO_INICIO
## 1                NA                         1           23/03/2015
## 2                NA                         4                     
## 3                NA                         1           02/04/2015
## 4                NA                         1           02/04/2015
## 5                NA                         1           31/03/2015
## 6                NA                         1           18/05/2015
##   DT_ANO_LETIVO_TERMINO CO_REGIAO CO_MESORREGIAO CO_MICRORREGIAO CO_UF
## 1            18/12/2015         1           1202           12005    12
## 2                               1           1202           12005    12
## 3            31/12/2015         1           1201           12002    12
## 4            31/12/2015         1           1201           12002    12
## 5            29/01/2016         1           1202           12003    12
## 6            31/12/2015         1           1202           12004    12
##   CO_MUNICIPIO CO_DISTRITO TP_DEPENDENCIA TP_LOCALIZACAO
## 1      1200252   120025205              3              2
## 2      1200252   120025205              3              2
## 3      1200302   120030205              2              2
## 4      1200302   120030205              2              2
## 5      1200344   120034405              3              1
## 6      1200013   120001305              2              2
##   TP_CATEGORIA_ESCOLA_PRIVADA IN_CONVENIADA_PP TP_CONVENIO_PODER_PUBLICO
## 1                          NA               NA                        NA
## 2                          NA               NA                        NA
## 3                          NA               NA                        NA
## 4                          NA               NA                        NA
## 5                          NA               NA                        NA
## 6                          NA               NA                        NA
##   IN_MANT_ESCOLA_PRIVADA_EMP IN_MANT_ESCOLA_PRIVADA_ONG
## 1                         NA                         NA
## 2                         NA                         NA
## 3                         NA                         NA
## 4                         NA                         NA
## 5                         NA                         NA
## 6                         NA                         NA
##   IN_MANT_ESCOLA_PRIVADA_SIND IN_MANT_ESCOLA_PRIVADA_SIST_S
## 1                          NA                            NA
## 2                          NA                            NA
## 3                          NA                            NA
## 4                          NA                            NA
## 5                          NA                            NA
## 6                          NA                            NA
##   IN_MANT_ESCOLA_PRIVADA_S_FINS CO_ESCOLA_SEDE_VINCULADA CO_IES_OFERTANTE
## 1                            NA                       NA               NA
## 2                            NA                       NA               NA
## 3                            NA                       NA               NA
## 4                            NA                       NA               NA
## 5                            NA                       NA               NA
## 6                            NA                       NA               NA
##   TP_REGULAMENTACAO IN_LOCAL_FUNC_PREDIO_ESCOLAR TP_OCUPACAO_PREDIO_ESCOLAR
## 1                 2                            1                          1
## 2                NA                           NA                         NA
## 3                 2                            1                          1
## 4                 2                            1                          1
## 5                 2                            1                          1
## 6                 2                            1                          1
##   IN_LOCAL_FUNC_SALAS_EMPRESA IN_LOCAL_FUNC_SOCIOEDUCATIVO
## 1                           0                            0
## 2                          NA                           NA
## 3                           0                            0
## 4                           0                            0
## 5                           0                            0
## 6                           0                            0
##   IN_LOCAL_FUNC_UNID_PRISIONAL IN_LOCAL_FUNC_PRISIONAL_SOCIO
## 1                            0                             0
## 2                           NA                            NA
## 3                            0                             0
## 4                            0                             0
## 5                            0                             0
## 6                            0                             0
##   IN_LOCAL_FUNC_TEMPLO_IGREJA IN_LOCAL_FUNC_CASA_PROFESSOR IN_LOCAL_FUNC_GALPAO
## 1                           0                            0                    0
## 2                          NA                           NA                   NA
## 3                           0                            0                    0
## 4                           0                            0                    0
## 5                           0                            0                    0
## 6                           0                            0                    0
##   TP_OCUPACAO_GALPAO IN_LOCAL_FUNC_SALAS_OUTRA_ESC IN_LOCAL_FUNC_OUTROS
## 1                 NA                             0                    0
## 2                 NA                            NA                   NA
## 3                 NA                             0                    0
## 4                 NA                             0                    0
## 5                 NA                             0                    0
## 6                 NA                             0                    0
##   IN_PREDIO_COMPARTILHADO IN_AGUA_FILTRADA IN_AGUA_REDE_PUBLICA
## 1                       0                1                    0
## 2                      NA               NA                   NA
## 3                       0                1                    0
## 4                       0                1                    0
## 5                       0                1                    1
## 6                       0                1                    0
##   IN_AGUA_POCO_ARTESIANO IN_AGUA_CACIMBA IN_AGUA_FONTE_RIO IN_AGUA_INEXISTENTE
## 1                      0               0                 0                   1
## 2                     NA              NA                NA                  NA
## 3                      0               1                 0                   0
## 4                      0               0                 1                   0
## 5                      0               0                 0                   0
## 6                      0               1                 0                   0
##   IN_ENERGIA_REDE_PUBLICA IN_ENERGIA_GERADOR IN_ENERGIA_OUTROS
## 1                       1                  0                 0
## 2                      NA                 NA                NA
## 3                       1                  0                 0
## 4                       0                  0                 0
## 5                       1                  0                 0
## 6                       1                  0                 0
##   IN_ENERGIA_INEXISTENTE IN_ESGOTO_REDE_PUBLICA IN_ESGOTO_FOSSA
## 1                      0                      0               0
## 2                     NA                     NA              NA
## 3                      0                      0               0
## 4                      1                      0               0
## 5                      0                      1               0
## 6                      0                      0               1
##   IN_ESGOTO_INEXISTENTE IN_LIXO_COLETA_PERIODICA IN_LIXO_QUEIMA
## 1                     1                        1              0
## 2                    NA                       NA             NA
## 3                     1                        0              0
## 4                     1                        0              0
## 5                     0                        1              0
## 6                     0                        1              1
##   IN_LIXO_JOGA_OUTRA_AREA IN_LIXO_RECICLA IN_LIXO_ENTERRA IN_LIXO_OUTROS
## 1                       0               0               0              0
## 2                      NA              NA              NA             NA
## 3                       0               0               0              1
## 4                       0               0               0              1
## 5                       0               0               0              0
## 6                       0               0               0              0
##   IN_SALA_DIRETORIA IN_SALA_PROFESSOR IN_LABORATORIO_INFORMATICA
## 1                 0                 0                          0
## 2                NA                NA                         NA
## 3                 0                 0                          0
## 4                 0                 0                          0
## 5                 1                 0                          0
## 6                 1                 1                          0
##   IN_LABORATORIO_CIENCIAS IN_SALA_ATENDIMENTO_ESPECIAL
## 1                       0                            0
## 2                      NA                           NA
## 3                       0                            0
## 4                       0                            0
## 5                       0                            0
## 6                       0                            0
##   IN_QUADRA_ESPORTES_COBERTA IN_QUADRA_ESPORTES_DESCOBERTA IN_QUADRA_ESPORTES
## 1                          0                             0                  0
## 2                         NA                            NA                 NA
## 3                          0                             0                  0
## 4                          0                             0                  0
## 5                          0                             0                  0
## 6                          0                             0                  0
##   IN_COZINHA IN_BIBLIOTECA IN_SALA_LEITURA IN_BIBLIOTECA_SALA_LEITURA
## 1          1             0               0                          0
## 2         NA            NA              NA                         NA
## 3          1             0               0                          0
## 4          1             0               0                          0
## 5          1             0               0                          0
## 6          1             1               0                          1
##   IN_PARQUE_INFANTIL IN_BERCARIO IN_BANHEIRO_FORA_PREDIO
## 1                  0           0                       1
## 2                 NA          NA                      NA
## 3                  0           0                       1
## 4                  0           0                       1
## 5                  0           0                       0
## 6                  0           0                       1
##   IN_BANHEIRO_DENTRO_PREDIO IN_BANHEIRO_EI IN_BANHEIRO_PNE IN_DEPENDENCIAS_PNE
## 1                         0              0               0                   0
## 2                        NA             NA              NA                  NA
## 3                         0              0               0                   0
## 4                         0              0               0                   0
## 5                         1              1               0                   0
## 6                         0              0               0                   1
##   IN_SECRETARIA IN_BANHEIRO_CHUVEIRO IN_REFEITORIO IN_DESPENSA IN_ALMOXARIFADO
## 1             0                    0             0           0               0
## 2            NA                   NA            NA          NA              NA
## 3             0                    0             0           0               0
## 4             0                    0             0           0               0
## 5             0                    1             1           1               0
## 6             1                    1             1           1               0
##   IN_AUDITORIO IN_PATIO_COBERTO IN_PATIO_DESCOBERTO IN_ALOJAM_ALUNO
## 1            0                0                   0               0
## 2           NA               NA                  NA              NA
## 3            0                0                   0               0
## 4            0                0                   0               0
## 5            0                0                   0               0
## 6            0                0                   1               1
##   IN_ALOJAM_PROFESSOR IN_AREA_VERDE IN_LAVANDERIA IN_DEPENDENCIAS_OUTRAS
## 1                   0             0             0                      0
## 2                  NA            NA            NA                     NA
## 3                   0             0             0                      0
## 4                   0             0             0                      0
## 5                   0             0             0                      0
## 6                   1             1             1                      0
##   NU_SALAS_EXISTENTES NU_SALAS_UTILIZADAS IN_EQUIP_TV IN_EQUIP_VIDEOCASSETE
## 1                   2                   2           0                     0
## 2                  NA                  NA          NA                    NA
## 3                   3                   3           0                     0
## 4                   1                   1           0                     0
## 5                   2                   3           0                     0
## 6                   1                   1           1                     0
##   IN_EQUIP_DVD IN_EQUIP_PARABOLICA IN_EQUIP_COPIADORA IN_EQUIP_RETROPROJETOR
## 1            0                   0                  0                      0
## 2           NA                  NA                 NA                     NA
## 3            0                   0                  0                      0
## 4            0                   0                  0                      0
## 5            1                   0                  1                      0
## 6            1                   1                  0                      1
##   IN_EQUIP_IMPRESSORA IN_EQUIP_IMPRESSORA_MULT IN_EQUIP_SOM IN_EQUIP_MULTIMIDIA
## 1                   0                        0            0                   0
## 2                  NA                       NA           NA                  NA
## 3                   0                        0            0                   0
## 4                   0                        0            0                   0
## 5                   1                        0            1                   1
## 6                   1                        0            0                   1
##   IN_EQUIP_FAX IN_EQUIP_FOTO IN_COMPUTADOR NU_EQUIP_TV NU_EQUIP_VIDEOCASSETE
## 1            0             0             0           0                     0
## 2           NA            NA            NA          NA                    NA
## 3            0             0             0           0                     0
## 4            0             0             0           0                     0
## 5            0             1             1           0                     0
## 6            0             0             1           1                     0
##   NU_EQUIP_DVD NU_EQUIP_PARABOLICA NU_EQUIP_COPIADORA NU_EQUIP_RETROPROJETOR
## 1            0                   0                  0                      0
## 2           NA                  NA                 NA                     NA
## 3            0                   0                  0                      0
## 4            0                   0                  0                      0
## 5            2                   0                  1                      0
## 6            1                   1                  0                      1
##   NU_EQUIP_IMPRESSORA NU_EQUIP_IMPRESSORA_MULT NU_EQUIP_SOM NU_EQUIP_MULTIMIDIA
## 1                   0                        0            0                   0
## 2                  NA                       NA           NA                  NA
## 3                   0                        0            0                   0
## 4                   0                        0            0                   0
## 5                   1                        0            2                   1
## 6                   1                        0            0                   1
##   NU_EQUIP_FAX NU_EQUIP_FOTO NU_COMPUTADOR NU_COMP_ADMINISTRATIVO NU_COMP_ALUNO
## 1            0             0             0                      0             0
## 2           NA            NA            NA                     NA            NA
## 3            0             0             0                      0             0
## 4            0             0             0                      0             0
## 5            0             1             1                      1             0
## 6            0             0             1                      0             0
##   IN_INTERNET IN_BANDA_LARGA NU_FUNCIONARIOS IN_ALIMENTACAO TP_AEE
## 1           0              0               3              1      0
## 2          NA             NA              NA             NA     NA
## 3           0              0               7              1      0
## 4           0              0               4              1      0
## 5           1              1              21              1      0
## 6           0              0              10              1      0
##   TP_ATIVIDADE_COMPLEMENTAR IN_FUNDAMENTAL_CICLOS TP_LOCALIZACAO_DIFERENCIADA
## 1                         0                     0                           0
## 2                        NA                    NA                          NA
## 3                         0                     0                           2
## 4                         0                     0                           2
## 5                         0                    NA                           0
## 6                         0                    NA                           0
##   IN_MATERIAL_ESP_QUILOMBOLA IN_MATERIAL_ESP_INDIGENA
## 1                          0                        0
## 2                         NA                       NA
## 3                          0                        1
## 4                          0                        1
## 5                          0                        0
## 6                          0                        0
##   IN_MATERIAL_ESP_NAO_UTILIZA IN_EDUCACAO_INDIGENA TP_INDIGENA_LINGUA
## 1                           1                    0                 NA
## 2                          NA                   NA                 NA
## 3                           0                    1                  3
## 4                           0                    1                  3
## 5                           1                    0                 NA
## 6                           1                    0                 NA
##   CO_LINGUA_INDIGENA IN_BRASIL_ALFABETIZADO IN_FINAL_SEMANA
## 1                 NA                      0               0
## 2                 NA                     NA              NA
## 3                 78                      0               0
## 4                 78                      0               0
## 5                 NA                      0               1
## 6                 NA                      0               1
##   IN_FORMACAO_ALTERNANCIA IN_MEDIACAO_PRESENCIAL IN_MEDIACAO_SEMIPRESENCIAL
## 1                       0                      1                          0
## 2                      NA                     NA                         NA
## 3                       0                      1                          0
## 4                       0                      1                          0
## 5                       0                      1                          0
## 6                       1                      1                          0
##   IN_MEDIACAO_EAD IN_ESPECIAL_EXCLUSIVA IN_REGULAR IN_EJA IN_PROFISSIONALIZANTE
## 1               0                     0          1      0                     0
## 2              NA                    NA         NA     NA                    NA
## 3               0                     0          1      0                     0
## 4               0                     0          1      0                     0
## 5               0                     0          1      0                     0
## 6               0                     0          1      0                     1
##   IN_COMUM_CRECHE IN_COMUM_PRE IN_COMUM_FUND_AI IN_COMUM_FUND_AF
## 1               0            1                1                0
## 2              NA           NA               NA               NA
## 3               0            1                1                1
## 4               0            1                1                1
## 5               1            0                0                0
## 6               0            0                0                0
##   IN_COMUM_MEDIO_MEDIO IN_COMUM_MEDIO_INTEGRADO IN_COMUM_MEDIO_NORMAL
## 1                    0                        0                     0
## 2                   NA                       NA                    NA
## 3                    0                        0                     0
## 4                    0                        0                     0
## 5                    0                        0                     0
## 6                    0                        1                     0
##   IN_ESP_EXCLUSIVA_CRECHE IN_ESP_EXCLUSIVA_PRE IN_ESP_EXCLUSIVA_FUND_AI
## 1                       0                    0                        0
## 2                      NA                   NA                       NA
## 3                       0                    0                        0
## 4                       0                    0                        0
## 5                       0                    0                        0
## 6                       0                    0                        0
##   IN_ESP_EXCLUSIVA_FUND_AF IN_ESP_EXCLUSIVA_MEDIO_MEDIO
## 1                        0                            0
## 2                       NA                           NA
## 3                        0                            0
## 4                        0                            0
## 5                        0                            0
## 6                        0                            0
##   IN_ESP_EXCLUSIVA_MEDIO_INTEGR IN_ESP_EXCLUSIVA_MEDIO_NORMAL IN_COMUM_EJA_FUND
## 1                             0                             0                 0
## 2                            NA                            NA                NA
## 3                             0                             0                 0
## 4                             0                             0                 0
## 5                             0                             0                 0
## 6                             0                             0                 0
##   IN_COMUM_EJA_MEDIO IN_COMUM_EJA_PROF IN_ESP_EXCLUSIVA_EJA_FUND
## 1                  0                 0                         0
## 2                 NA                NA                        NA
## 3                  0                 0                         0
## 4                  0                 0                         0
## 5                  0                 0                         0
## 6                  0                 0                         0
##   IN_ESP_EXCLUSIVA_EJA_MEDIO IN_ESP_EXCLUSIVA_EJA_PROF IN_COMUM_PROF
## 1                          0                         0             0
## 2                         NA                        NA            NA
## 3                          0                         0             0
## 4                          0                         0             0
## 5                          0                         0             0
## 6                          0                         0             0
##   IN_ESP_EXCLUSIVA_PROF
## 1                     0
## 2                    NA
## 3                     0
## 4                     0
## 5                     0
## 6                     0
```
---

## Importando dados no R

Vamos importar dados utilizando pacotes do `tidyverse`. Iniciaremos com o pacote `readr`, que importa arquivos de texto, como `.txt` ou `.csv`. O `readr` transforma arquivos de texto em `tibbles`&lt;sup&gt;[1]&lt;/sup&gt;, usando as funções:

.left-column[

- read_csv()

- read_csv2()

- read_tsv()

- read_delim()

- read_table()

- read_fwf()

- read_log()

]

.right-column[

lê arquivos delimitados por vírgulas

lê arquivos separados por ponto e vírgula

lê arquivos separados por tabulações

lê arquivos separados por qualquer delimitador

lê arquivos de largura fixa, com colunas separadas por espaço

lê arquivos de largura fixa, onde os campos são especificados por suas larguras

lê arquivos padrões log (estilo `Apache`)

  
&lt;div style="text-align:right"&gt; &lt;a name=cite-RDataScience&gt;&lt;/a&gt;[Wickham and Grolemund (2019)](#bib-RDataScience) &lt;/div&gt;&lt;br&gt;
]



.footnote[
[1] Tibbles são `data frames` com ajustes em comportamentos antigos, que as deixam mais amigáveis aos cientistas de dados.
]
---
## Importando dados no R

Como exemplo, vamos importar os dados de despesas municipais com educação e saúde, no formato csv. O banco de dados será atribuído ao objeto que chamamos de `desp_csv` 


```r
desp_csv = read_csv("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\despesas_municipios_saude_educacao.csv")
```

```
## Rows: 54097 Columns: 15
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (9): IN_PERIODICIDADE, CO_ESFERA, CO_PODER, NO_ENTE, SG_ENTE, fase_desp...
## dbl  (5): AN_EXERCICIO, NR_PERIODO, ID_ENTE, VALUE, QT_HABITANTE
## dttm (1): DT_STATUS_COLETA
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```
---
## Importando dados no R

Visualize o banco pelo `Console`, executando a variável `desp_csv` ou clique no objeto `desp_csv`, em `Enviroment`, para abrir o banco em outra aba do `R`

```r
desp_csv
```

```
## # A tibble: 54,097 × 15
##    AN_EXERCICIO NR_PER…¹ IN_PE…² CO_ES…³ CO_PO…⁴ ID_ENTE NO_ENTE SG_ENTE fase_…⁵
##           &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1         2019        2 B       M       E       4206603 Guaruj… SC      DESPES…
##  2         2019        1 B       M       E       2411908 São Fr… RN      DESPES…
##  3         2019        4 B       M       E       4211454 Nova I… SC      DESPES…
##  4         2019        1 B       M       E       4210704 Matos … SC      DESPES…
##  5         2019        1 B       M       E       3112109 Caparaó MG      DESPES…
##  6         2019        2 B       M       E       3514205 Dolcin… SP      DESPES…
##  7         2019        4 B       M       E       3520608 Indiana SP      DESPES…
##  8         2019        1 B       M       E       2503407 Cacimb… PB      DESPES…
##  9         2019        1 B       M       E       4202875 Brunóp… SC      DESPES…
## 10         2019        1 B       M       E       3551306 Sebast… SP      DESPES…
## # … with 54,087 more rows, 6 more variables: funcao &lt;chr&gt;, VALUE &lt;dbl&gt;,
## #   QT_HABITANTE &lt;dbl&gt;, ELEMENTLABEL &lt;chr&gt;, DT_STATUS_COLETA &lt;dttm&gt;,
## #   dh_consulta &lt;chr&gt;, and abbreviated variable names ¹​NR_PERIODO,
## #   ²​IN_PERIODICIDADE, ³​CO_ESFERA, ⁴​CO_PODER, ⁵​fase_despesa
```
---
## Importando dados no R
Vamos importar um banco de dados em Excel pelo pacote `readxl`. O objeto `dados.escola_xlsx` receberá o banco `escolas.xlsx`:


```r
dados.escola_xlsx = read_excel("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.xlsx")
dados.escola_xlsx
```

```
## # A tibble: 62 × 166
##    NU_ANO_CENSO CO_ENTIDADE NO_ENTIDADE      CO_OR…¹ TP_SI…² DT_ANO_LETIVO_INI…³
##           &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;            &lt;lgl&gt;     &lt;dbl&gt; &lt;dttm&gt;             
##  1         2015    12133221 ESC ESTELA PERE… NA            1 2015-03-23 00:00:00
##  2         2015    12132225 ESC QUINTAIS FL… NA            4 NA                 
##  3         2015    12131229 ESC INDIGENA SH… NA            1 2015-04-02 00:00:00
##  4         2015    12130222 ESC INDIGENA PE… NA            1 2015-04-02 00:00:00
##  5         2015    12129224 ESC CRECHE IEDA… NA            1 2015-03-31 00:00:00
##  6         2015    12128236 ESC FAMILIA AGR… NA            1 2015-05-18 00:00:00
##  7         2015    12127221 MAL COSTA E SIL… NA            4 NA                 
##  8         2015    12125229 ESC ESPERANCA    NA            2 NA                 
##  9         2015    12124222 ESC CENTRO RURA… NA            2 NA                 
## 10         2015    12123226 ESC CENTRO RURA… NA            2 NA                 
## # … with 52 more rows, 160 more variables: DT_ANO_LETIVO_TERMINO &lt;dttm&gt;,
## #   CO_REGIAO &lt;dbl&gt;, CO_MESORREGIAO &lt;dbl&gt;, CO_MICRORREGIAO &lt;dbl&gt;, CO_UF &lt;dbl&gt;,
## #   CO_MUNICIPIO &lt;dbl&gt;, CO_DISTRITO &lt;dbl&gt;, TP_DEPENDENCIA &lt;dbl&gt;,
## #   TP_LOCALIZACAO &lt;dbl&gt;, TP_CATEGORIA_ESCOLA_PRIVADA &lt;lgl&gt;,
## #   IN_CONVENIADA_PP &lt;lgl&gt;, TP_CONVENIO_PODER_PUBLICO &lt;lgl&gt;,
## #   IN_MANT_ESCOLA_PRIVADA_EMP &lt;lgl&gt;, IN_MANT_ESCOLA_PRIVADA_ONG &lt;lgl&gt;,
## #   IN_MANT_ESCOLA_PRIVADA_SIND &lt;lgl&gt;, IN_MANT_ESCOLA_PRIVADA_SIST_S &lt;lgl&gt;, …
```
---
# Carregando dados

Para carregar conjuntos de dados existentes no `R`, use a função `data()`. Vamos carregar os dados `mtcars`, disponível no pacote `datasets`.
O conjunto `mtcars` é um _data frame_ com 32 observações e 11 variáveis numéricas.

.left-column[
- mpg

- cyl

- disp

- hp

- drat 

- wt

- qsec

- vs

- am

- gear

- carb

]
.right-column[
milhas (EUA) por galão

número de cilindros

cilindrada

potência do motor (cavalos de força)

relação do eixo traseiro

peso (1000 libras)

tempo para percorrer 1/4 de milha

motor (0 = V; 1 = reto)

transmisão (0 = automática; 1 = manual)

número de marchas

número de carburadores


]
---
## Carregando dados

Carregue o conjunto de dados com:


```r
data(mtcars)
```

Leia as 6 primeiras linhas:


```r
head(mtcars)
```

```
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---
# Análise descritiva (unidimensional)

Podemos acessar algumas informações sobre o conjunto de dados `mtcars`com:


```r
help(mtcars)  #Documentação sobre o conjunto de dados

dim(mtcars)   #Dimensão do conjunto de dados

names(mtcars) #Nome das variáveis (colunas)
```

Vamos criar um objeto chamado `carros` e selecionar algumas variáveis do conjunto `mtcars` para compor o novo conjunto



```r
carros = mtcars[, c(1, 2, 3, 4, 6, 8, 9, 11)] #Selcionadas as colunas 1, 2, 3, 4, 6, 8, 9 e 11 e todas as observações
head(carros)
```

```
##                    mpg cyl disp  hp    wt vs am carb
## Mazda RX4         21.0   6  160 110 2.620  0  1    4
## Mazda RX4 Wag     21.0   6  160 110 2.875  0  1    4
## Datsun 710        22.8   4  108  93 2.320  1  1    1
## Hornet 4 Drive    21.4   6  258 110 3.215  1  0    1
## Hornet Sportabout 18.7   8  360 175 3.440  0  0    2
## Valiant           18.1   6  225 105 3.460  1  0    1
```

---
## Análise descritiva (unidimensional)

A função `search()` mostra o caminho de procura do `R`. Quando executada, essa função mostra o `.GlobalEnv`, pacotes, autoloads ou `data frames` e listas adicionadas com a função `attach()`.

Para ver os objetos "atachados", digite:


```r
search()
```

```
##  [1] ".GlobalEnv"         "package:readxl"     "package:readr"     
##  [4] "package:foreign"    "package:magrittr"   "package:RefManageR"
##  [7] "package:stats"      "package:graphics"   "package:grDevices" 
## [10] "package:utils"      "package:datasets"   "package:methods"   
## [13] "Autoloads"          "package:base"
```

Quando precisamos fazer muitas referências para um objeto, é possível minimizar a digitação, colocando o `data frame` ou lista no caminho de procura, pela função attach. 

---
## Análise descritiva (unidimensional)
Perceba que o objeto `carros` não apareceu na lista de objetos "atachados". Se quisermos calcular algumas estatísticas do peso dos carros, usando diretamente a variável `wt`, surgirá uma mensagem de erro:


```r
summary(wt)
```

```
## Error in summary(wt): objeto 'wt' não encontrado
```

Para executar o sumário sem acrescentar `carros` no caminho de procura, temos que o usar o símbolo `$` entre a base de dados e a coluna (variável) de interesse:


```r
summary(carros$wt)
```

```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.513   2.581   3.325   3.217   3.610   5.424
```

---
## Análise descritiva (unidimensional)

"Atachando" a base `carros`, podemos visualizá-la no caminho de procura do `R`.


```r
attach(carros)
search()
```

```
##  [1] ".GlobalEnv"         "carros"             "package:readxl"    
##  [4] "package:readr"      "package:foreign"    "package:magrittr"  
##  [7] "package:RefManageR" "package:stats"      "package:graphics"  
## [10] "package:grDevices"  "package:utils"      "package:datasets"  
## [13] "package:methods"    "Autoloads"          "package:base"
```

Agora, podemos reduzir a digitação para calcular o sumário da variável peso (`wt`)


```r
summary(wt)
```

```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.513   2.581   3.325   3.217   3.610   5.424
```
---
## Análise descritiva (unidimensional)

.pull-left[
Usamos a função `table` para gerar frequências por quantidade de carburador



```r
tabela.carb &lt;- table(carb)
tabela.carb
```

```
## carb
##  1  2  3  4  6  8 
##  7 10  3 10  1  1
```


Tabela de freqências relativas

```r
tabela.carb/length(carb)
```

```
## carb
##       1       2       3       4       6       8 
## 0.21875 0.31250 0.09375 0.31250 0.03125 0.03125
```
]

.pull-right[
Ou usando a função `prop.table`

```r
prop.table(tabela.carb)
```

```
## carb
##       1       2       3       4       6       8 
## 0.21875 0.31250 0.09375 0.31250 0.03125 0.03125
```

]

---
## Análise descritiva (unidimensional)
Tabela de frequências para o peso com intervalos, usando a função `cut`


```r
table(cut(wt, br = seq(1.5, 5.5, 0.8)))
```

```
## 
## (1.5,2.3] (2.3,3.1] (3.1,3.9] (3.9,4.7] (4.7,5.5] 
##         6         6        16         1         3
```

E outras estatísticas


```r
median(wt)           #Mediana
## [1] 3.325
mean(wt)             #Média
## [1] 3.21725
sd(wt)               #Desvio padrão
## [1] 0.9784574
sd(wt)/mean(wt)*100  #Coeficiente de variação
## [1] 30.41285
```

---
## Análise descritiva (unidimensional)

.pull-left[
Gráfico de setores

```r
pie(tabela.carb)
```

![](Curso-R_files/figure-html/unnamed-chunk-60-1.png)&lt;!-- --&gt;
]

.pull-right[
Gráfico de barras


```r
barplot(tabela.carb)
```

![](Curso-R_files/figure-html/unnamed-chunk-61-1.png)&lt;!-- --&gt;
]

---
## Análise descritiva (unidimensional)


.pull-left[
Histograma

```r
hist(wt)
```

![](Curso-R_files/figure-html/unnamed-chunk-62-1.png)&lt;!-- --&gt;
]

.pull-right[
Boxplot

```r
boxplot(wt)
```

![](Curso-R_files/figure-html/unnamed-chunk-63-1.png)&lt;!-- --&gt;
]
---
## Análise descritiva (unidimensional)

A estética e outros elementos dos gráficos podem ser editados, mas vamos explorar melhor esses recursos com o pacote `ggplot`, que faz parte do `tidyverse`.


```r
hist(wt, col = "blue", border = "yellow", main = "Histograma do peso do veículos",
     xlab = "Peso (1.000 libras)", ylab = "Frequência")
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-64-1.png" style="display: block; margin: auto;" /&gt;
---
## Análise descritiva (bidimensional)

número de cilindros (cyl) x número de carburadores (carb)


```r
table(cyl, carb)
```

```
##    carb
## cyl 1 2 3 4 6 8
##   4 5 6 0 0 0 0
##   6 2 0 0 4 1 0
##   8 0 4 3 6 0 1
```

Calculando as proporções:


```r
prop.table(table(cyl, carb))
```

```
##    carb
## cyl       1       2       3       4       6       8
##   4 0.15625 0.18750 0.00000 0.00000 0.00000 0.00000
##   6 0.06250 0.00000 0.00000 0.12500 0.03125 0.00000
##   8 0.00000 0.12500 0.09375 0.18750 0.00000 0.03125
```

---
## Análise descritiva (bidimensional)

Para porcentagens por linha ou por coluna, use `margin = 1` ou `margin = 2`, respectivamente.


```r
prop.table(table(cyl, carb), margin = 1)
```

```
##    carb
## cyl          1          2          3          4          6          8
##   4 0.45454545 0.54545455 0.00000000 0.00000000 0.00000000 0.00000000
##   6 0.28571429 0.00000000 0.00000000 0.57142857 0.14285714 0.00000000
##   8 0.00000000 0.28571429 0.21428571 0.42857143 0.00000000 0.07142857
```


```r
prop.table(table(cyl, carb), margin = 2)
```

```
##    carb
## cyl         1         2         3         4         6         8
##   4 0.7142857 0.6000000 0.0000000 0.0000000 0.0000000 0.0000000
##   6 0.2857143 0.0000000 0.0000000 0.4000000 1.0000000 0.0000000
##   8 0.0000000 0.4000000 1.0000000 0.6000000 0.0000000 1.0000000
```

---
## Análise descritiva (bidimensional)
Também podemos obter visualizações gráficas dos cruzamentos

.pull-left[


```r
plot(table(cyl, carb))
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-69-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[


```r
barplot(table(cyl, carb), beside = TRUE,
        leg = TRUE)
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-70-1.png" style="display: block; margin: auto;" /&gt;


]
---
## Análise descritiva (bidimensional)
Vamos relacionar uma variável categórica (qualitativa) com uma contínua.

Tipo de transmissão (am) x consumo de combustível (mpg)


```r
tapply(mpg, am, summary)
```

```
## $`0`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   10.40   14.95   17.30   17.15   19.20   24.40 
## 
## $`1`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   15.00   21.00   22.80   24.39   30.40   33.90
```

Usmao `tapply` para dividir o conjunto de dados em grupos.

---
## Análise descritiva (bidimensional)
Construindo um gráfico boxplot da relação `am` x `mpg`.


```r
boxplot(mpg ~ am, col = c("green", "magenta"), names = c("Manual", "Automático"),
        main = "Consumo de combustível por tipo de transmissão", ylab = "milhas por galão")
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-72-1.png" style="display: block; margin: auto;" /&gt;

---
## Análise descritiva (bidimensional)


.pull-left[
Vamos verificar o `coeficiente de correlação linear de Pearson` entre o peso (wt) e o conumo de combustível (mpg)

```r
cor(wt, mpg)
```

```
## [1] -0.8676594
```
]

.pull-right[
E o `gráfico de dispersão`


```r
plot(wt, mpg, xlab = "Peso do veículo",
     ylab = "Consumo de combustível",
     col = "blue", pch = 19)
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-74-1.png" style="display: block; margin: auto;" /&gt;

]
---
## Análise descritiva

Vamos incluir uma terceira variável nesta análise. Os pontos serão identificados pela categoria do número de cilindros (cyl), que são 4, 6 e 8.



```r
plot(wt, mpg, xlab = "Peso do veículo",
     ylab = "Consumo de combustível (milhas/galão)")
points(wt[cyl == 4], mpg[cyl == 4], col="magenta", pch = 19)
points(wt[cyl == 6], mpg[cyl == 6], col="blue", pch = 19)
points(wt[cyl == 8], mpg[cyl == 8], col="green", pch = 19)
legend(4.5, 33, c("4 cilindros", "6 cilindros", "8 cilindros"),
pch = c(19, 19, 19), col=c("magenta", "blue", "green"))
```

---
## Análise descritiva

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-76-1.png" style="display: block; margin: auto;" /&gt;

---
# Pacote Tidyverse

Com o pacote `tidyverse`, conseguimos reduzir o tamanho do código para executar uma função. Voltemos ao conjunto de dados das despesas com educação e saúde.


```r
desp_csv = read_csv("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\despesas_municipios_saude_educacao.csv")
```

Vamos visualizar o banco de dados (`data frame`):


```r
View(desp_csv)
```

E listar os nomes das variáveis:


```r
names(desp_csv)
```

```
##  [1] "AN_EXERCICIO"     "NR_PERIODO"       "IN_PERIODICIDADE" "CO_ESFERA"       
##  [5] "CO_PODER"         "ID_ENTE"          "NO_ENTE"          "SG_ENTE"         
##  [9] "fase_despesa"     "funcao"           "VALUE"            "QT_HABITANTE"    
## [13] "ELEMENTLABEL"     "DT_STATUS_COLETA" "dh_consulta"
```

---
## Pacote Tidyverse

.pull-left[
Recuperar as despesas dos municípios da Bahia

```r
desp_csv[desp_csv$SG_ENTE == "BA", "VALUE"]
```

```
## # A tibble: 5,132 × 1
##       VALUE
##       &lt;dbl&gt;
##  1  479245.
##  2  834414.
##  3  550915.
##  4  865695.
##  5 1081189.
##  6 1118872.
##  7 1281717.
##  8  579776.
##  9  473314.
## 10  815257.
## # … with 5,122 more rows
```
]

.pull-right[
Somar o total de despesas municipais na Bahia

```r
sum(desp_csv[desp_csv$SG_ENTE == "RR",
             "VALUE"])
```

```
## [1] 854738904
```

ou da seguinte forma:


```r
sum(desp_csv[desp_csv[['SG_ENTE']] == "RR",
             "VALUE"])
```

```
## [1] 854738904
```

]

---
## Pacote Tidyverse (dplyer e magrittr)

Vamos fazer a mesma coisa, dessa vez, usando o `dplyr`, um dos pacotes do `Tideverse`. O `dplyer` é muito usado para tarefas de manuseio de dados, como agregar, sumarizar, agrupar, ordenar, filtrar etc.

&lt;a name=cite-SillasG&gt;&lt;/a&gt;[Gonzaga (2018)](http://sillasgonzaga.com/material/curso_visualizacao/index.html)


```r
desp_csv %&gt;%
  dplyr::filter(SG_ENTE == "RR") %&gt;% 
  dplyr::select(VALUE) %&gt;% 
  sum()
```

```
## [1] 854738904
```

.pull-left[

Há dois símbolos nesse código: o operador `pipe` (`%&gt;%`) e os quatro pontos (`::`). O `pipe` permite o encademaneto de funções, ele concatena uma sequência de funções. O pacote `magrittr` é responsável pelo operador `pipe`. Já os quatro pontos (`::`) ligam o nome do pacote à sua função.
]

.pull-right[
Ao digitar `::` após o o nome do pacote, o `R` abre uma janela com a lista das funções que pertencem àquele pacote. Além disso, estamos informando ao `R` qual pacote usar para aquela função, pois há funções com o mesmo nome, que pertencem a pacotes diferentes. É também uma forma de documentar o código, deixando claro qual pacote foi usado no código.

]

---
## Pacote Tidyverse (dplyer)

A interpretação do código abaixo está no comentário:

```r
desp_csv %&gt;% #No conjunto de dados "desp_csv"
  dplyr::filter(SG_ENTE == "RR") %&gt;% #Filtre o ente federativo Roraima
  dplyr::select(VALUE) %&gt;% #Selecione a coluna "VALUE"
  sum() #Some tudo
```

Visualize o a despesa total por UF :

```r
desp_csv %&gt;% #No o conjunto de dados "desp_csv"
   dplyr::select(SG_ENTE,VALUE) %&gt;% #Selecione as colunas "SG_ENTE" e "VALUE"
   dplyr::group_by(SG_ENTE) %&gt;% #Agrupe por "SG_ENTE"
   dplyr::summarise(
    Soma = sum(VALUE) #Some os VALUE (valores das despesas)
   )
```

---
## Pacote Tidyverse (dplyer) e pacote rmarkdown

.pull-left[
Visualize o a despesa total por UF :

```
## # A tibble: 26 × 2
##    SG_ENTE         Soma
##    &lt;chr&gt;          &lt;dbl&gt;
##  1 AC        849924641.
##  2 AL       4272172277.
##  3 AM       4457109424.
##  4 AP        747540502.
##  5 BA      21950110329.
##  6 CE      13472020537.
##  7 ES       4538370893.
##  8 GO       8352979611.
##  9 MA       8331320792.
## 10 MG      24225450571.
## # … with 16 more rows
```
]

.pull-right[
Podemos melhorar a visualização da tabela, atribuindo a saída à um objeto, que vamos chamar de `Despesas`. Posteriormente, geramos uma tabela mais formatada com a função `paged_table`, do pacote `rmarkdown`.


```r
Despesas &lt;- desp_csv %&gt;%
   dplyr::select(SG_ENTE,VALUE) %&gt;%
   dplyr::group_by(SG_ENTE) %&gt;%
   dplyr::summarise(
    Soma = sum(VALUE)
    )
```
]
---
## Pacote Tidyverse (dplyer)


```r
rmarkdown::paged_table(Despesas)
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["SG_ENTE"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Soma"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"AC","2":"849924641"},{"1":"AL","2":"4272172277"},{"1":"AM","2":"4457109424"},{"1":"AP","2":"747540502"},{"1":"BA","2":"21950110329"},{"1":"CE","2":"13472020537"},{"1":"ES","2":"4538370893"},{"1":"GO","2":"8352979611"},{"1":"MA","2":"8331320792"},{"1":"MG","2":"24225450571"},{"1":"MS","2":"4427618311"},{"1":"MT","2":"5017722939"},{"1":"PA","2":"12266589666"},{"1":"PB","2":"5567605075"},{"1":"PE","2":"11851913587"},{"1":"PI","2":"4280268937"},{"1":"PR","2":"13358296179"},{"1":"RJ","2":"28520235299"},{"1":"RN","2":"4459952885"},{"1":"RO","2":"1896283028"},{"1":"RR","2":"854738904"},{"1":"RS","2":"12340791965"},{"1":"SC","2":"13235129807"},{"1":"SE","2":"3176324846"},{"1":"SP","2":"84136173246"},{"1":"TO","2":"1929544692"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;
---
## Pacote Tidyverse (dplyer) e pacote rmarkdown
 Exibir a despesa total de forma ordenada (do maior para o menor)


```r
Despesas &lt;- desp_csv %&gt;% dplyr::select(SG_ENTE,VALUE) %&gt;% dplyr::group_by(SG_ENTE) %&gt;%
  dplyr::summarise(Soma = sum(VALUE)) %&gt;% dplyr::arrange(dplyr::desc(Soma))
rmarkdown::paged_table(Despesas)
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["SG_ENTE"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Soma"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"SP","2":"84136173246"},{"1":"RJ","2":"28520235299"},{"1":"MG","2":"24225450571"},{"1":"BA","2":"21950110329"},{"1":"CE","2":"13472020537"},{"1":"PR","2":"13358296179"},{"1":"SC","2":"13235129807"},{"1":"RS","2":"12340791965"},{"1":"PA","2":"12266589666"},{"1":"PE","2":"11851913587"},{"1":"GO","2":"8352979611"},{"1":"MA","2":"8331320792"},{"1":"PB","2":"5567605075"},{"1":"MT","2":"5017722939"},{"1":"ES","2":"4538370893"},{"1":"RN","2":"4459952885"},{"1":"AM","2":"4457109424"},{"1":"MS","2":"4427618311"},{"1":"PI","2":"4280268937"},{"1":"AL","2":"4272172277"},{"1":"SE","2":"3176324846"},{"1":"TO","2":"1929544692"},{"1":"RO","2":"1896283028"},{"1":"RR","2":"854738904"},{"1":"AC","2":"849924641"},{"1":"AP","2":"747540502"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

---
## Pacote Tidyverse (dplyer)
Salvando os dados em arquivo Excel


```r
xlsx::write.xlsx(Despesas, file = "Despesas.xlsx", sheetName = "Despesas", 
  col.names = TRUE, row.names = TRUE, append = FALSE)
```

Vamos preparar uma tabela ordenada pela despesa média per capita, segundo os entes federativos.


```r
Desp_Med &lt;- desp_csv %&gt;%
  dplyr::select(NO_ENTE,SG_ENTE,VALUE,QT_HABITANTE) %&gt;% 
  dplyr::group_by(NO_ENTE,SG_ENTE) %&gt;%
  dplyr::summarise(
    DespesaTotal = sum(VALUE),
    PopTotal = mean(QT_HABITANTE))
```

```
## `summarise()` has grouped output by 'NO_ENTE'. You can override using the
## `.groups` argument.
```
---
## Pacote Tidyverse (dplyer)


```r
Desp_Med &lt;- Desp_Med %&gt;% 
   dplyr::group_by(SG_ENTE) %&gt;%
   dplyr::summarise(
    DespesaTotal = sum(DespesaTotal),
    PopTotal = sum(PopTotal)) %&gt;% 
  dplyr::mutate(DespesaMedia = DespesaTotal/PopTotal) %&gt;%
  dplyr::select(SG_ENTE,DespesaMedia) %&gt;%
  dplyr::arrange(dplyr::desc(DespesaMedia))
```



---
## Pacote Tidyverse e Pacote rmarkdown


```r
rmarkdown::paged_table(Desp_Med)
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["SG_ENTE"],"name":[1],"type":["chr"],"align":["left"]},{"label":["DespesaMedia"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"MS","2":"2433.2801"},{"1":"SC","2":"2024.9980"},{"1":"MT","2":"1943.8925"},{"1":"SP","2":"1909.8608"},{"1":"PI","2":"1773.4674"},{"1":"TO","2":"1707.6251"},{"1":"RJ","2":"1681.7469"},{"1":"PR","2":"1646.3555"},{"1":"MG","2":"1629.2100"},{"1":"MA","2":"1607.9800"},{"1":"RS","2":"1593.6144"},{"1":"CE","2":"1568.7100"},{"1":"BA","2":"1492.7872"},{"1":"RR","2":"1482.4598"},{"1":"PA","2":"1474.1506"},{"1":"ES","2":"1471.4752"},{"1":"PB","2":"1456.1487"},{"1":"AL","2":"1414.6369"},{"1":"SE","2":"1404.3983"},{"1":"RN","2":"1399.8386"},{"1":"RO","2":"1358.8868"},{"1":"PE","2":"1292.4947"},{"1":"AM","2":"1259.3821"},{"1":"GO","2":"1248.3470"},{"1":"AC","2":"1012.3104"},{"1":"AP","2":"913.2296"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

---
class: center
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/Exercitar1.gif?raw=true)
background-size: 30%
background-position: 50% 70%

&lt;font color="#256BC1", size="7", face="sans-serif"&gt; &lt;b&gt;Bora trabalhar!&lt;/b&gt; &lt;/font&gt;

---
## Pacote Tidyverse (ggplot2)

O `ggplot2` é um poderoso pacote para criação de gráficos mais elegantes, versáteis e complexos.

O termo **gg** vem de **gramática de gráficos**. Para um aprofundamento nos fundamentos teóricos do `ggplot2`, é recomendada a leitura de [*A Layered Grammar of Graphics*](http://vita.had.co.nz/papares/layered-grammar.pdf).

O `ggplot2` oferece duas funções principais:
- `quickplot()` ou `qplot`
- `ggplot()`

Iniciemos a construção dos gráficos com a leitura de um banco de dados em txt, com informações de PIB e população.


```r
dados_PIB = read_delim("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\PIBMunicipios2019.txt",
                       delim = ";")
```
---
## Pacote Tidyverse (ggplot2)
Leitura das primeiras dez linhas do conjunto de dados:

```r
head(dados_PIB, n = 10)
```

```
## # A tibble: 10 × 9
##    COD_UF UF    DESC_UF          COD_MUN MUNIC…¹ ATIVI…² PIB_T…³ POPUL…⁴ RANKI…⁵
##     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1     35 SP    São Paulo        3550308 São Pa… Demais…  7.64e8  1.19e7       1
##  2     33 RJ    Rio de Janeiro   3304557 Rio de… Demais…  3.55e8  6.50e6       2
##  3     53 DF    Distrito Federal 5300108 Brasíl… Demais…  2.74e8  2.86e6       3
##  4     29 BA    Bahia            2927408 Salvad… Demais…  6.38e7  2.85e6      12
##  5     23 CE    Ceará            2304400 Fortal… Demais…  6.74e7  2.58e6       9
##  6     31 MG    Minas Gerais     3106200 Belo H… Demais…  9.72e7  2.47e6       4
##  7     13 AM    Amazonas         1302603 Manaus  Indúst…  8.49e7  2.02e6       6
##  8     41 PR    Paraná           4106902 Curiti… Demais…  9.61e7  1.86e6       5
##  9     26 PE    Pernambuco       2611606 Recife  Demais…  5.47e7  1.60e6      13
## 10     43 RS    Rio Grande do S… 4314902 Porto … Demais…  8.24e7  1.46e6       7
## # … with abbreviated variable names ¹​MUNICIPIO, ²​ATIVIDADE_ECONOMICA,
## #   ³​`PIB_TOTAL (em R$ mi)`, ⁴​POPULACAO, ⁵​`RANKING PIB TOTAL`
```
---
## Pacote Tidyverse (ggplot2)

Os gráficos originados em `ggplot2` são baseados em *camadas*. Cada gráfico possui três componentes chave: `data` (os dados que vão alimentar o gráfico); `aes()` (aesthetic mappings), responsável pelo mapeamento estético e as propriedades visuais do gráfico; e a função `geom()`, responsável pela geometria do gráfico (linha, coluna, histograma etc). Vejamos o exemplo de um gráfico de barras do banco `dados_PIB`, que mostra a quantidade de municípios por UF.


```r
library(ggplot2)
ggplot(data = dados_PIB, aes(x = UF)) + #aqui temos a definição dos dados e um pouco da estética
  geom_bar() #a geometria definida aqui é o gráfico de barras
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-96-1.png" style="display: block; margin: auto;" /&gt;
---
## Pacote Tidyverse (ggplot2)
.pull-left[

```r
ggplot(dados_PIB) +
  geom_bar(aes(y = reorder(UF, UF, length)))
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-97-1.png" style="display: block; margin: auto;" /&gt;
]

.pull-right[

Este segundo gráfico apresenta os dados ordenados por quantidade de municípios e na forma de barras horizontais.

Perceba agora que o nome do argumeto `data =` para o conjunto de dados foi suprimido; e a estética está incluída na camada da geometria (`geom_bar()`), e não na primeira camada (`ggplot()`).

]
---
## Pacote Tidyverse (ggplot2)
.pull-left[

```r
##Gráfico usando a abordagem tidyverse
library(tidyverse)
dados_PIB %&gt;%
  group_by(UF) %&gt;%
  summarise(
    media = mean(POPULACAO),
    mediana= mean(POPULACAO),
    maximo =  max(POPULACAO),
    minimo = min(POPULACAO),
    total = sum(POPULACAO) #A função sum faz
    #o somatório de um conjunto de valores
    #numéricos
  ) %&gt;%
  ggplot() +
  geom_col(aes(x = UF, y = total))#Experimente
  #trocar o eixo y por outras variáveis
  #descritivas
```

]

.pull-right[
&lt;img src="Curso-R_files/figure-html/unnamed-chunk-99-1.png" style="display: block; margin: auto;" /&gt;
Perceba que o `pipe` concatenou o o código das estatísticas descritivas com o código do gráfico `ggplot`. Por causa dessa "concatenação", a definição do conjunto de dados em `ggplot()` foi suprimida.
]

---
## Pacote Tidyverse (ggplot2)

```r
#Aprofundando  análise e alterando e alterando uma variável
dados_PIB %&gt;%
  dplyr::filter(UF == "BA") %&gt;%
  dplyr::slice_max(order_by = POPULACAO, n = 10) %&gt;%
  dplyr::mutate(MUNICIPIO = reorder(MUNICIPIO, POPULACAO)) %&gt;%
  ggplot()+
  geom_col(aes(y = MUNICIPIO, x = POPULACAO))
```

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-100-1.png" style="display: block; margin: auto;" /&gt;
---
## Pacote Tidyverse (ggplot2 e janitor)

Vamos aumentar a complexidade do código, criando uma nova variável, chamada `PIB_percapita`, a partir da relação entre o PIB total e a população. O `R` apontará um erro nesse código

```r
dados_PIB %&gt;% 
  dplyr::filter(UF == "BA") %&gt;% 
  dplyr::mutate(PIB_percapita = round(PIB_TOTAL (em R$ mi)/POPULACAO * 1000, 0)) %&gt;%
  dplyr::select(MUNICIPIO, PIB_percapita) %&gt;% 
  dplyr::arrange(dplyr::desc(PIB_percapita)) %&gt;% 
  ggplot()+
  geom_col(aes(y = MUNICIPIO, x = POPULACAO))
```

```
## Error: &lt;text&gt;:3:53: unexpected symbol
## 2:   dplyr::filter(UF == "BA") %&gt;% 
## 3:   dplyr::mutate(PIB_percapita = round(PIB_TOTAL (em R
##                                                        ^
```
O problema econtra-se no texto da variável `PIB_TOTAL (em R$ mi)`, pois o símbolo `$` é utilizado pelo `R` para referenciar colunas de um banco de dados. Teremos outro problema se `PIB_TOTAL (em R$ mi)` for colocado entre aspas. Vamos testar:

---
## Pacote Tidyverse (ggplot2 e janitor)

Vamos aumentar a complexidade do código, criando uma nova variável, chamada `PIB_percapita`, a partir da relação entre o PIB total e a população. O `R` apontará um erro nesse código

```r
dados_PIB %&gt;% 
  dplyr::filter(UF == "BA") %&gt;% 
  dplyr::mutate(PIB_percapita = round("PIB_TOTAL (em R$ mi)"/POPULACAO * 1000, 0)) %&gt;%
  dplyr::select(MUNICIPIO, PIB_percapita) %&gt;% 
  dplyr::arrange(dplyr::desc(PIB_percapita)) %&gt;% 
  ggplot()+
  geom_col(aes(y = MUNICIPIO, x = POPULACAO))
```

```
## Error in `dplyr::mutate()`:
## ! Problem while computing `PIB_percapita = round("PIB_TOTAL (em R$
##   mi)"/POPULACAO * 1000, 0)`.
## Caused by error in `"PIB_TOTAL (em R$ mi)" / POPULACAO`:
## ! argumento não-numérico para operador binário
```

Nesse caso, introduzir as aspas fez a função `mutate` "entender" que a variável `PIB_TOTAL (em R$ mi)` é um argumento não-numérico. É aí que entra o pacote `janitor`, que vai arrumar os nomes das variáveis para atender às boas práticas de programação, removendo o espaço em branco no nome de cada variável.

---
## Pacote Tidyverse (ggplot2 e janitor)

Vamos listar as variáveis presentes na base de dados com a função `names()`:

```r
dados_PIB %&gt;% names()
```

```
## [1] "COD_UF"               "UF"                   "DESC_UF"             
## [4] "COD_MUN"              "MUNICIPIO"            "ATIVIDADE_ECONOMICA" 
## [7] "PIB_TOTAL (em R$ mi)" "POPULACAO"            "RANKING PIB TOTAL"
```
Os nomes de algumas variáveis contém espaços, que atrapalham na hora da programação. A função `clean_names()` do pacote `janitor` faz a limpeza de acentos, letras maiúsculas, parênteses, pontos, barras etc, que causam problemas na leitura das variáveis. Veja como ficam as variáveis após a limpeza:


```r
dados_PIB %&gt;% #A partir a base dados_PIB
  janitor::clean_names() %&gt;% #Limpe os nomes das variáveis
  names() #Liste os nomes das variáveis 
```

```
## [1] "cod_uf"              "uf"                  "desc_uf"            
## [4] "cod_mun"             "municipio"           "atividade_economica"
## [7] "pib_total_em_r_mi"   "populacao"           "ranking_pib_total"
```

---
## Pacote Tidyverse (ggplot2 e janitor)
Só que o código anterior não fez a substitituição das variáveis, mas fez apenas uma limpeza nos nomes sem modificar a estrutura do banco. Para realizar essa alteração, vamos substituir o banco `dados_PIB` por outro do mesmo nome, com a substituição dos nomes das variáveis.


```r
library(janitor)
dados_PIB &lt;-  clean_names(dados_PIB) #Limpe os nomes das variáveis e substitua o banco antigo

names(dados_PIB) #Liste os nomes das variáveis
```

```
## [1] "cod_uf"              "uf"                  "desc_uf"            
## [4] "cod_mun"             "municipio"           "atividade_economica"
## [7] "pib_total_em_r_mi"   "populacao"           "ranking_pib_total"
```

Agora, sim, podemos gerar aquele gráfico com o `ggplot2`, fazendo as devidas substituições.

---
## Pacote Tidyverse (ggplot2)
.pull-left[

```r
dados_PIB %&gt;% 
  dplyr::filter(uf == "RO") %&gt;% 
  dplyr::mutate(pib_percapita =
                round(
                  pib_total_em_r_mi/populacao
                  * 1000, 0)) %&gt;%
  dplyr::select(municipio,
                pib_percapita) %&gt;% 
  dplyr::mutate(municipio =
                  reorder(municipio,
                          pib_percapita)) %&gt;% 
  ggplot()+
  geom_col(aes(y = municipio,
               x = pib_percapita))
```
]

.pull-right[
&lt;img src="Curso-R_files/figure-html/unnamed-chunk-107-1.png" style="display: block; margin: auto;" /&gt;
]


---
## Pacote Tidyverse (ggplot2)



```r
dados_PIB %&gt;% #Na base de dados "dados_PIB"
  group_by(uf) %&gt;% #Agrupe por "uf"
  summarise(PIBtotal = round(sum(pib_total_em_r_mi)/1000000,1)) %&gt;% #crie a variavel "PIBtotal",
  #somando a coluna do pib, divida por 1 milhao e arredonde para 1 decimal
  ggplot() + #crie um gráfico "ggplot"
  ggplot2::aes( y = forcats::fct_reorder(uf,PIBtotal), #no eixo Y, ordene as UFs pelo PIB
    x = PIBtotal) + #no eixo x, o PIB
  ggplot2::geom_col(fill = 'deeppink', width = 0.9, alpha = 0.7, colour = 'blue') + #use gráfico de
  #coluna de cor rosa profunda, largura 0.9, transparencia 0.7 e boradas azuis
  ggplot2::labs(x = 'PIB total (em R$ BI)',  y = 'Unidade Federativa', #Substitua os textos nos eixos x e y
    title = 'Produto interno bruto segundo unidade federativa. 2019. Brasil', #Acrescente um título
    subtitle = 'Dados consultados em 14/12/2022', #Acrescente o subtítulo
    caption = 'Fonte: IBGE') + #Acrescente a fonte
  theme_test() + #use esse o tema "theme_test()" (sem cor no fundo e sem linhas intermediárias)
   geom_text(aes(label = PIBtotal), vjust = 0.4, hjust = -0.06) + # rótulos na variável PIBtotal
  #no argumento "theme", faça os seguintes ajustes de altura (size) e cor (colour):
  theme(axis.text.x = element_text(size = 14, colour = 'blue'), #altura 14 e cor azul para o texto do eixo y
    axis.text.y = element_text(size = 12, colour = 'blue'), #texto do eixo y
    axis.title.y = element_text(size = 12, colour = 'blue'), #título do eixo y
    axis.title.x = element_text(size = 14, colour = 'blue'), #título do eixo x
    plot.title = element_text(size = 20)) #título principal
```

---
## Pacote Tidyverse (ggplot2)

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-109-1.png" style="display: block; margin: auto;" /&gt;
---


```r
ggplot2::ggplot(data = dados_PIB %&gt;%
                  dplyr::filter(uf == 'BA'))+
  ggplot2::aes(
    x = pib_total_em_r_mi,
    y = populacao,
  )+
  ggplot2::geom_point(
    aes(colour = atividade_economica),
    size = 6
  )+
  ggplot2::labs(
    x = 'PIB total',
    y = 'População',
    title = 'Produto interno Bruto versus população',
    caption = 'Fonte: IBGE'
  )+
  ggplot2::geom_text(
    aes(
      x = pib_total_em_r_mi,
      y = populacao,
      label = atividade_economica
    ),
    size = 2.5
  )+
  ggplot2::theme(
    legend.position = 'none'
  )
```
---

&lt;img src="Curso-R_files/figure-html/unnamed-chunk-111-1.png" style="display: block; margin: auto;" /&gt;


---
# Referências

&lt;a name=bib-CursoR&gt;&lt;/a&gt;[curso-r](#cite-CursoR) (2022). _RStudio_.
[Online; acesso em 31-Novembro-2022]. URL:
[https://livro.curso-r.com](https://livro.curso-r.com).

&lt;a name=bib-SillasG&gt;&lt;/a&gt;[Gonzaga, S.](#cite-SillasG) (2018).
_Introdução a R para Visualização e Apresentação de Dados_. [Online;
acesso em 13-Dezembro-2022]. URL:
[http://sillasgonzaga.com/material/curso_visualizacao/index.html](http://sillasgonzaga.com/material/curso_visualizacao/index.html).

&lt;a name=bib-lingR&gt;&lt;/a&gt;[INE/UFSC](#cite-lingR) (2013). _Linguagem R:
R-Gui e R-Commander_. Universidade Federal de Santana Catarina - UFSC.

&lt;a name=bib-andreluis&gt;&lt;/a&gt;[Maia, A. L. S.](#cite-andreluis) (2016).
_Métodos Computacionais em Estatística no R_. Unijorge – Centro
Universitário Jorge Amado. Boston, MA.

&lt;a name=bib-RDataScience&gt;&lt;/a&gt;[Wickham, H. and G.
Grolemund](#cite-RDataScience) (2019). _R para Data Science_. Rio de
Janeiro: Alta Books.

&lt;a name=bib-RStudio&gt;&lt;/a&gt;[Wikipédia](#cite-RStudio) (2017). _RStudio_.
[Online; acesso em 28-Novembro-2022]. URL:
[https://pt.wikipedia.org/wiki/RStudio](https://pt.wikipedia.org/wiki/RStudio).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
