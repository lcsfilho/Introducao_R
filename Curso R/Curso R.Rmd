---
title: "Presentation Ninja"
subtitle: "&#x2694;&#xFE0F; xaringan +<br/>&#x1F60E; xaringanthemer"  
author: 
  - "Yihui Xie"
  - "Garrick Aden-Buie"
date: '`r Sys.Date()`'
output:
  xaringan::moon_reader:
    lib_dir: libs
    seal: false
    css: Curso_R.css
    fig_caption: true
    number_sections: true
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
      countIncrementalSlides: true

---
layout: true


```{r, load_refs, include=FALSE, cache=FALSE}
#install.packages("RefManageR")
#install.packages("bibtex")

library(RefManageR)
RefManageR::BibOptions(
  check.entries = FALSE,
  style = "markdown",
  cite.style = "authoryear",
  bib.style = "authoryear"
)
referencias <- RefManageR::ReadBib("referencias.bib", check = FALSE)
```


<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/BrasaoGoverno.png?raw=true" style="left: 5px; top: 5px; position: absolute" width="7.5%" height="13%">

 
 <img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/UCS.PNG?raw=true" style="right: 20px; top: 5px; position: absolute" width="6%" height="14%">

 <img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaVertical.PNG?raw=true" style="right: 0px; top: 0px; position: absolute" width="1.5%" height="99.7%">
 
  <img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaHorizontal.PNG?raw=true" style="left: -1px; bottom: 0px; position: absolute" width="99.3%" height="2.5%">

---
class: center, middle

# Introdução ao Software R e ao R Markdown

Luiz Carlos Santana Filho
<p style="font-size: 12px">
Diretoria de Planejamento Social</p>
<p style="font-size: 12px">Superintendência de Planejamento Estratégico</p>
<p style="font-size: 15px">Secretaria do Planejamento</p>

<p style="color: blue; font-size: 14px; margin: 5px"><i>luizcarlos.santanafilho@seplan.ba.gov.br</i></p>

[https://github.com/lcsfilho](https://github.com/lcsfilho)


 <img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/FigR_RStudio_RMarkdown.png?raw=true" style="left: auto; right=auto; bottom:-100px; position: relative" width="40%" height="1.7%">

---
<div class="titulo" position="Center">Introdução ao Software R e ao R Markdown</div>

```{r echo=FALSE, message=FALSE, warning=FALSE}
require("magrittr")

file_name <- rstudioapi::getSourceEditorContext()[["path"]]

doc <- toc <- readLines(file_name)
tocc <- character()
for (i in 1:length(toc)) {
  if(substr(toc[i][1], 1, 2) == "# ") {
    toc[i] <- gsub("# ", "", toc[i], fixed = TRUE) %>% 
                gsub("#", "", ., fixed = TRUE)
    tocc <- append(tocc, toc[i])
  }
}

tocc <- paste("- ", tocc[-1])

row_outline <- which(doc == "# Índice")
row_body <- which(doc == "---")
row_body <- row_body[which(row_body > row_outline)][1]

doc <- c(doc[1:row_outline], "\n", tocc, "\n", doc[(row_body):length(doc)])


writeLines(doc, file_name)

```
<br>

# Índice


-  Índice
-  O que é o `R`?
-  Definições
-  Iniciação
-  Dados no `R`
-  Importando dados no R
-  Carregando dados
-  Análise descritiva
-  Referências


---

layout: true

<div class="titulo" position="Center">Introdução ao Software R e ao R Markdown</div>


<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/BrasaoGoverno.png?raw=true" style="left: 5px; top: 5px; position: absolute" width="7.5%" height="13%">

 
<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/UCS.PNG?raw=true" style="right: 20px; top: 5px; position: absolute" width="6%" height="14%">

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaVertical.PNG?raw=true" style="right: 0px; top: 0px; position: absolute" width="1.5%" height="99.7%">
 
<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/LinhaHorizontal.PNG?raw=true" style="left: -1px; bottom: 0px; position: absolute" width="99.3%" height="2.5%">

---
<center><font size="6">Bibliografia básica</font></center>

<div class="container">


<img src="https://images-submarino.b2w.io/produtos/134528441/imagens/livro-r-para-data-science-importe-arrume-transforme-visualize-e-modele-dados/134528441_1_large.jpg" style="left: auto; top: 25%; position: absolute" width="20%">


<img src="http://www.cookbook-r.com/r_graphics_cookbook.png" style="left: 41%; top: 25%; position: absolute" width="18%">


<img src="https://bookdown.org/yihui/rmarkdown-cookbook/images/cover.png" style="right: 10%; top: 25%; position: absolute" width="12.5%">


<div class="bibliografia">

.pull-left[
> [R para Data Science](https://www.amazon.com.br/para-data-science-transforme-visualize/dp/8550803243/ref=asc_df_8550803243/?tag=googleshopp00-20&linkCode=df0&hvadid=379736468109&hvpos=&hvnetw=g&hvrand=4984106143229360944&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=1001533&hvtargid=pla-811060137763&psc=1)<br>
> [R Graphics Cookbook](https://www.amazon.com.br/Graphics-Cookbook-2e-Winston-Chang/dp/1491978600/ref=asc_df_1491978600/?tag=googleshopp00-20&linkCode=df0&hvadid=379787555408&hvpos=&hvnetw=g&hvrand=5700521040944184438&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=1001533&hvtargid=pla-422014417858&psc=1/)<br>
> [R Markdown Cookbook (WEB)](https://bookdown.org/yihui/rmarkdown-cookbook/)<br>
> [R Markdown Cookbook (PDF)](https://bookdown.org/yihui/rmarkdown-cookbook/rmarkdown-cookbook.pdf)<br>
> [Ciência de Dados em R - Curso R](https://livro.curso-r.com/)

]

.pull-right[
> [Cookbook for R](http://www.cookbook-r.com/)<br>
> [Aprendendo R - Fiocruz](http://www.de.ufpb.br/~tatiene/Disciplinas/2014.2/LivroR/aprendendo_r.pdf)<br>
> [An Introduction to R](https://cran.r-project.org/doc/manuals/R-intro.pdf)<br>
> [Using R for Data Analysis and Graphics](https://cran.r-project.org/doc/contrib/usingR.pdf)<br>
> [Visualização de dados com ggplot2](http://leg.ufpr.br/~walmes/cursoR/data-vis/slides/08-ggplot2.pdf)<br>

]


[Livros R gratuitos para download](https://producaoanimalcomr.wordpress.com/2015/12/15/livros-r-gratuitos-para-downloads/)


</div>
</div>
---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/R_logo.png?raw=true)
background-size: 45px
background-position: 50% 16%

# O que é o `R`?


- R é uma linguagem e um ambiente de desenvolvimento integrado, para cálculos estatísticos e gráficos.

- Foi criada originalmente por [_Ross Ihaka_](https://pt.wikipedia.org/w/index.php?title=Ross_Ihaka&action=edit&redlink=1) e por [_Robert Gentleman_](https://pt.wikipedia.org/w/index.php?title=Robert_Gentleman&action=edit&redlink=1) no departamento de Estatística da universidade de Auckland, Nova Zelândia, e foi desenvolvido por um esforço colaborativo de pessoas em vários locais do mundo.

- O nome R provêm em parte das iniciais dos criadores e também de um jogo figurado com a linguagem `S` (da Bell Laboratories, antiga AT&T).

- R é uma linguagem e ambiente similar ao [S](https://pt.wikipedia.org/wiki/S_(linguagem_de_programa%C3%A7%C3%A3o) - pode ser considerado uma implementação distinta do S; embora com importantes diferenças, muitos códigos escritos para o S rodam inalterados no R. A implementação comercial de S é [S-PLUS](https://www.splus.iag.usp.br/).

- O código fonte do `R` está disponível sob a licença [GNU](https://www.gnu.org/) [GPL](https://pt.wikipedia.org/wiki/GNU_General_Public_License) e as versões binárias pré-compiladas são fornecidas para Windows, Macintosh, e muitos sistemas operacionais Unix/Linux.

- `R` é também altamente expansível com o uso dos pacotes, que são bibliotecas para funções específicas ou áreas de estudo específicas.

[Blog Software Livre na Educação](https://www.ufrgs.br/soft-livre-edu/software-educacional-livre-na-wikipedia/r-linguagem-de-programacao/)

---
<div class="Ross_Ihaka">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Ross_Ihaka_%285189180796%29.jpg/220px-Ross_Ihaka_%285189180796%29.jpg" style="left: 17%; top: 30%; position: absolute" width="35%" height="40%" >
<p>Ross Ihaka</p>
</div>


<div class="Robert_Gentleman">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Rober_Gentleman.png/220px-Rober_Gentleman.png" style="right: 16%; top: 30%; position: absolute"width="23%" height="40%" >
<p>Robert Gentleman</p>
</div>

---
<center>
<figure>
<img src="https://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2594d25970c-800wi" style="left: 25%; top: 20%; position: absolute"width="50%">
<figcaption>Número de pacotes R publicados no Repositório CRAN</figcaption>
</figure>
</center>

---
# Definições

* Objeto: `R` é uma linguagem orientada a objetos e tudo em R é um objeto. Trata-se de uma referência a um local da memória que possui um valor.
Por exemplo, um único número é um objeto, uma variável é um objeto, a saída é um objeto, um conjunto de dados é um objeto que é, por si próprio, uma coleção de objetos, etc.

* Vetor: Uma coleção de um ou mais objetos do mesmo tipo. Por exemplo, todos os números ou todos os caracteres.

* Função: Um conjunto de instruções realizadas em um ou mais objetos. Funções são normalmente utilizadas para executar tarefas específicas e comuns, que normalmente exigiriam muitas instruções.
Por exemplo, a função `mean()` (média) é usada para calcular a média aritmética dos valores de um vetor numérico.

* Argumento: Informação específica (na forma name = value) passada para uma função para determinar como ela deve desempenhar a sua tarefa. Por exemplo, a função `mean()` requer, pelo menos, um argumento - o nome de um objeto que contém os valores a partir dos quais a média será calculada.

* Operador: Um símbolo com significado pré-definido. Os operadores
comuns incluem +, −, ∗, /, ˆ, e os operadores lógicos
<, >, <=, >=, ==, !=, &&, ||.

`r RefManageR::TextCite(referencias, "andreluis")`

---
# Iniciação

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/TelaR.PNG?raw=true" style="right: 3%; top: 35%; position: absolute"width="45%">


1. Acesse o endereço https://www.r-project.org e baixe o `R` por uma das URLs disponíveis (CRAN<sup>1</sup> Mirrors)
1. Instale o software `R` (`R-Gui`)
1. Execute o software `R` (`R-Gui`)

.pull-left[
"O sistema é formado por um programa básico (`R-Gui`) e muitos pacotes com procedimento adicionais. Tudo é gratuito e com código livre, voltado para comunidade acadêmica."
`r RefManageR::Cite(referencias, "lingR")`

Ao executar, o software `R` abre o console com informações e avisos, seguidos pelo prompt de comando (<font color="#F2A025"> > </font>).
]

.footnote[
[1] [Comprehensive R Archive Network](https://cran.r-project.org/mirrors.html)
]

---
## Explorando o R

Operações básicas no R

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/Operacoes_R.PNG?raw=true" style="right: auto; top: 35%; position: absolute"width="40%">
<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
O símbolo <font color="#F2A025"> # </font> é usado para comentário no R.



---
## Criando vetores

Criando uma sequência de números de 0 a 20:

```{r collapse = TRUE}
x = 0 : 20
x
```

Acessando o 6º elemento do vetor:

```{r collapse = TRUE}
x [6]
```

Alterando dados:

```{r collapse = TRUE}
x [1] = 20
x
```
---
Há outra forma de criar vetores, utilizando a função `c()`.
Vamos gerar uma sequência numérica de 0 a 10.

```{r collapse = TRUE}

x = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
x
```

Também podemos criar vetor de caracteres:

```{r collapse = TRUE}
y = c("A", "B", "C", "D", "E")
y
```

Criando uma matriz:
```{r collapse = TRUE}
matriz <- matrix(c(1, 2, 3, 4), nrow = 2, ncol = 2)
matriz
```
---
Para criar uma lista:


```{r collapse = TRUE}
list(2, 5, "A", TRUE, FALSE)

```

Também podemos trabalhar com `data frames`, que são objetos semelhantes a uma matriz, mas as suas colunas têm nomes e podem conter tipos de dados diferentes.

---
## Gráficos

Para criar um gráfico, precisamos dos dados. Na seção anterior, criamos uma sequência numérica atribuída à variável `x`. Agora, criaremos a varável `y` para fazer par com a variável `x`.

```{r fig.height=5, fig.align='center', collapse = TRUE}
y = 5 + 2*x^2
plot(x,y)
```

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/matematica.gif?raw=true)
background-size: 35%
background-position: 85% 80%

## Estatísticas

.pull-left[
Funções isoladas:
```{r collapse = TRUE}
mean(x)      #Média
median(x)    #Mediana
quantile(x)  #Quartis
var(x)       #Variância
sd(x)        #Desvio Padrão
min(x)       #Mínimo
max(x)       #Máximo
sum(x)       #Somatório

```
]

.pull-right[
Função summary()
```{r collapse = TRUE}
summary(x)
```
]

---
## Pacotes (Bibliotecas)

- Um `pacote` é uma coleção de funções, dados e documetações, que ampliam as funcionalidades básicas do `R`.

- A instalação básica do `R` já contém vários pacotes.

- Há milhares de pacotes gratúitos para instalação, que não fazem parte da instalção básica do `R`.


Pacotes podem ser instalados e carregados pelas funções `install.packages()` e `library()`, respectivamente.

Exemplo: Vamos instalar e carregar um pacote de gráficos chamado `ggplot`.

```{r eval=FALSE}
install.packages("ggplot2")
library(ggplot2)
```

Repare que o nome do pacote deve estar escrito entre aspas para a instalação, mas, para carregar, as aspas devem ser dispensadas.

Ao instalar um pacote, este deve ser carregado (`library()`) toda vez que o `R` for iniciado.

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/Help.PNG?raw=true)
background-size: 41%
background-position: 50% 88%

## Help

Para obter ajuda sobre qualquer função, basta escrever no `console` o nome da função (ou do pacote) precedido de uma interrogação: `?ggplot`. A outra opção é `help(ggplot)`.

Também podemos acessar a área de Help do `R Studio` e escrever o nome da função no campo indicado na figura


---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/RStudio.jpg?raw=true)
background-size: 150px
background-position: 50% 16%

## R Studio

O [R Studio ](https://posit.co/) "é um software livre de ambiente de desenvolvimento integrado para `R`, uma linguagem de programação para gráficos e cálculos estatísticos."  `r RefManageR::Cite(referencias, "RStudio")`. É uma interface para uso do `R` e deve ser instalado após a instalação do `R`. Sua instalação se dá pelo endereço https://posit.co/.

<div style="float:left"><br><br><br><br><br>Scripts<br>
Funções<br>
<br><br><br><br>
Objetos<br>
Valores<br>
Funções ativas
</div>


<div style="float:right">Console<br>
Terminal<br><br><br>
  Background Jobs<br><br><br>
Files<br>
Plot<br>
Packages<br><br><br>
Help<br>
Viewer</div>

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0032.gif?raw=true" style="left: 15%; top: 60%; position: absolute"width="5%">


<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0032.gif?raw=true" style="left: 15%; top: 85%; position: absolute"width="5%">


<img src="https://github.com/lcsfilho/Introducao_R/blob/faa0293cb8164941fa87551756cf3ea421c867ef/Curso%20R/fig/telaRStudio.PNG?raw=true" style="left: 20%; top: 38%; position: absolute"width="60%">

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0044.gif?raw=true" style="left: 80%; top: 50%; width=5%; position: absolute">


<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/seta-imagem-animada-0044.gif?raw=true" style="left: 80%; top: 80%; width=5%; position: absolute">

---
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/giphy.gif?raw=true)
background-size: 35%
background-position: 90% 50%

## Vantagens do RStudio


- Highlight do código;

- Autocomplete;

- Match automático de parenteses e chaves;

- Interface intuitiva para objetos, gráficos e script;

- Criação de "projetos" com interface para controle de versão;

- Facilidade na criação de pacotes;

- Interação com HTML, entre outras.


[Análise Real - Economia: Teoria, Prática e Política](https://analisereal.com/2015/01/20/r-e-rstudio-2/)

---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/RCloud.PNG?raw=true)
background-size: 71%
background-position: 50% 92%

## R Studio Cloud

<img src="https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/positCloud.svg?raw=true" style="left: 23%; top: 16%; position: absolute"width="20%">

Pode ser acessado a partir de qualquer computador ligado à internet; pode ser acessado pelo celular; todos os pacotes já estão instalados; possibilidade de compartilhar projetos; opção de usar gratuitamente, porém com limitações de memória e tempo de uso por mês.

---

background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/fig/TabelaDados.PNG?raw=true)
background-size: 25%
background-position: 50% 55%

# Dados no `R`

Vamos criar um conjunto de dados aleatório de 8 pessoas, com 4 variáveis: peso, altura, idade e renda. Perceba que a renda de uma pessoa não foi medida (dado _missing_).

<br><br><br><br><br><br><br><br>

```{r collapse = TRUE}
#Criando os vetores de variáveis pela função c()
peso = c(55, 70, 76, 80, 62, 51, 68, 74)
idade = c(27, 40, 36, 60, 42, 24, 35, 39)
altura = c(1.60, 1.72, 1.65, 1.75, 1.55, 1.63, 1.72, 1.58)
renda = c(2000, 5000, 4000, 3000, 1500, NA, 7000, 4500)
```

---
## Dados no `R`

A depender da função a presença do `NA` pode causar problemas

```{r collapse = TRUE}
sum(renda)
```

```{r collapse = TRUE}
mean(renda)
```

```{r collapse = TRUE}
min(renda)
```


```{r collapse = TRUE}
summary(renda)
```
---
## Dados no `R`

Usamos a função `c()` (concatenar) para agrupar os dados, criando vetores separados. Agora, usaremos as funções `cbind` (<u>c</u>olumn) e `rbind` (<u>r</u>ow) para concatenar os vetores em linhas e colunas.

Podemos agrupar as 4 variáveis em colunas, da seguinte forma:

```{r collapse = TRUE}
dados_pessoas = cbind(peso, idade, altura, renda)
dados_pessoas
```

---
## Dados no `R`

Podemos recuperar dados de colunas, linhas, dados individuais ou um conjunto de dados selecionados.

Acessando dados da 1ª coluna:

.pull-left[
```{r collapse = TRUE}
dados_pessoas[,1]
```

Acessando dados da 3ª linha:
```{r collapse = TRUE}
dados_pessoas[3,]
```

Acessando dado da 2ª linha e 3ª coluna:
```{r collapse = TRUE}
dados_pessoas[2,3]
```
]

.pull-right[
Acessando dados das linhas 2 a 4, na coluna 1:
```{r collapse = TRUE}
dados_pessoas[2:4,1]
```

Acessando todos os dados das linhas 1, 2 e 4:
```{r collapse = TRUE}
dados_pessoas[c(1, 2, 4),]
```
]
---
## Dados no `R`
Função `matrix()`
.pull-left[
Criando matriz de dimensão 8 x 4:

```{r}
dados_pessoas.M = matrix(nrow = 8, ncol = 4)
dados_pessoas.M
```
]


.pull-right[
Vamos alimentar a matriz com os dados das pessoas

```{r}
dados_pessoas.M[,1] = c(55, 70, 76, 80, 62, 51, 68, 74)
dados_pessoas.M[,2] = c(27, 40, 36, 60, 42, 24, 35, 39)
dados_pessoas.M[,3] = c(1.60, 1.72, 1.65, 1.75, 1.55, 1.63, 1.72, 1.58)
dados_pessoas.M[,4] = c(2000, 5000, 4000, 3000, 1500, NA, 7000, 4500)
dados_pessoas.M
```

]
---
## Dados no `R`
Função `data.frame()`

O _Data Frame_ é uma estrutura semelhante à uma matriz, mas com cada coluna sendo tratada separadamente. Em um _Data Frame_, todos osa dados dentro da mesma coluna serão forçados a serem do mesmo tipo. Podemos ver o _Data Frame_ como uma "tabela" formada por um conjunto de dados, podendo ser de tipos diferentes entre as colunas, sendo que esses tipos podem ser variáveis numéricas, _strings_, nominais (fatores), datas etc.

```{r collapse = TRUE}
dados_pessoas.DF = data.frame(peso, idade, altura, renda)
dados_pessoas.DF
```
---
class: center
background-image: url(https://github.com/lcsfilho/Introducao_R/blob/master/Curso%20R/gif/Exercitar1.gif?raw=true)
background-size: 30%
background-position: 50% 70%

<font color="#256BC1", size="7", face="sans-serif"> <b>Bora trabalhar!</b> </font>

---
# Importando dados no R
.pull-left[
Com o `R`, podemos importar dados de diversos formatos (_xls_, _xlsx_, _CSV_, _txt_, _SAS_, _SPSS_ etc). Devemos seguir os seguintes passos:
1. Saber o caminho do arquivo
1. Usar a função `setwd()` para alterar o diretório de trabalho
1. Instalar o  _tydeverse_, que é um pacote guarda-chuva (conjunto de pacotes) que auxilia no ciclo da ciência de dados (importar, arrumar, transformar, visualizar e modelar)

A sua pasta de trabalho pode ser encontrada com o comando:

```{r collapse = TRUE}
getwd()
```

]

.pull-right[

Para definir a pasta de trabalho, por exemplo, use:



```{r eval=FALSE, echo=TRUE}
setwd("C:/Documentos/Curso R")
```
Atenção: Atente para as barras invertidas ("/") no endereço do arquivo. Ao copiar e colar o endereço, as barras vêem inclinadas para esquerda ("C:\Documentos\Curso R").


Para instalar o `tidyverse`:

```{r eval=FALSE, echo=TRUE}
install.packages("tidyverse")
```

Carregue o `tideverse`

```{r eval=FALSE, echo=TRUE}
library(tidyverse)
```
]

---
## Importando dados no R


O `Tidyverse` agrega um conjunto de 30 pacotes. São eles:

```{r collapse = TRUE}
tidyverse::tidyverse_packages()

```

O pacote `readr` importa arquivos de texto, como `.txt` ou `.csv`.

Já o pacote `readxl` é utilizado para ler planilhas do Excel, basta utilizar a função `read_excel()`.

O pacote `haven` é usado para ler arquivos gerados por outros sotwares, como  `SPSS`, `SAS` e `STATA`.

`r RefManageR::TextCite(referencias, "CursoR")`

---
## Importando dados no R

Mas antes do `tideyverse`, vamos falar um pouco de alguns pacotes de leitura de dados já presentes na instalação básica do `R`. Um desses pacotes é o  `utils`, que possui recursos para leitura de diversos arquivos, inclusive aqueles que estão na internet.

Algumas de suas funções são: `read.table` e `read.csv`.

Por padrão, o `R` considera que os dados estão separados por tabulação e o separador de decimais é o ponto.

Se os dados estiverem separados por ":" e o separador decimal for ",", os argumentos `sep` e `dec` da função serão:

```{r eval=FALSE, echo=TRUE}
read.table("dados.csv", head=TRUE, sep=":", dec=",")
```
ou
```{r eval=FALSE, echo=TRUE}
read.csv("dados.csv", head=TRUE, sep=":", dec=",")
```

Ou podemo ler diretamente na internet
```{r eval=FALSE, echo=TRUE}
read.table("https://raw.githubusercontent.com/lcsfilho/Introducao_R/master/Curso%20R/bd/escolas.txt",
           sep="|", dec=",")
```
---
## Importando dados no R

O pacote `foreign`, também presente na distribuição base do `R`, possui diversas funções de importação. Para isso, basta carregar o pacote:


```{r}
library(foreign)
```

Algumas funções para importação de dados no `R`:

.left-column[
- read.dbf()

- read.epiinfo()

- read.mtp()

- read.S()

- read.spss()

- read.dta()

- read.xport()
]


.right-column[

para arquivos DBASE

para arquivos do Epi Info

para arquivos do Minitab

para arquivos do S-Plus

para dados do SPSS

para dados do Stata

para dados do SAS

]

---
## Importando dados no R
Se o arquivo `.sav` está na sua pasta de trabalho:

```{r eval=FALSE}
read.spss("escolas.sav")
```

Caso contrário, localize o arquivo com a função:

```{r eval=FALSE}
file.chose()
```

O `R` retorna o caminho para o arquivo, por exemplo:

```{r eval=FALSE}
"F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.sav"

```

Então, use (com `to.data.frame = TRUE` para retornar um `data frame`)

```{r}
dados.escola = read.spss("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.sav", to.data.frame = TRUE)
```

Assim, criamos uma variável chamada `dados.escola`, que recebe o banco de banco de dados `escola.sav`

---
## Importando dados no R

Para inspecionar a estrutura do conjunto de dados, use:
```{r include=TRUE}
str(dados.escola)
```
---
## Importando dados no R

Para visualizar todo o conjunto de dados, use:

```{r}
View(dados.escola)
```

Para visualizar as 6 primeiras linhas do conjunto de dados, use:
```{r}
head(dados.escola)
```
---

## Importando dados no R

Vamos importar dados utilizando pacotes do `tidyverse`. Iniciaremos com o pacote `readr`, que importa arquivos de texto, como `.txt` ou `.csv`. O `readr` transforma arquivos de texto em `tibbles`<sup>[1]</sup>, usando as funções:

.left-column[

- read_csv()

- read_csv2()

- read_tsv()

- read_delim()

- read_table()

- read_fwf()

- read_log()

]

.right-column[

lê arquivos delimitados por vírgulas

lê arquivos separados por ponto e vírgula

lê arquivos separados por tabulações

lê arquivos separados por qualquer delimitador

lê arquivos de largura fixa, com colunas separadas por espaço

lê arquivos de largura fixa, onde os campos são especificados por suas larguras

lê arquivos padrões log (estilo `Apache`)

  
<div style="text-align:right"> `r RefManageR::TextCite(referencias, "RDataScience")` </div><br>
]



.footnote[
[1] Tibbles são `data frames` com ajustes em comportamentos antigos, que as deixam mais amigáveis aos cientistas de dados.
]
---
## Importando dados no R

Como exemplo, vamos importar os dados de despesas municipais com educação e saúde, no formato csv. O banco de dados será atribuído ao objeto que chamamos de `desp_csv` 

```{r echo = 2}
library(readr)
desp_csv = read_csv("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\despesas_municipios_saude_educacao.csv")
```
---
## Importando dados no R

Visualize o banco pelo `Console`, executando a variável `desp_csv` ou clique no objeto `desp_csv`, em `Enviroment`, para abrir o banco em outra aba do `R`
```{r}
desp_csv
```
---
## Importando dados no R
Vamos importar um banco de dados em Excel pelo pacote `readxl`. O objeto `dados.escola_xlsx` receberá o banco `escolas.xlsx`:

```{r echo = c(2, 3)}
library(readxl)
dados.escola_xlsx = read_excel("F:\\Curso de R\\Introducao_R\\Curso R\\bd\\escolas.xlsx")
dados.escola_xlsx
```
---
# Carregando dados

Para carregar conjuntos de dados existentes no `R`, use a função `data()`. Vamos carregar os dados `mtcars`, disponível no pacote `datasets`.
O conjunto `mtcars` é um _data frame_ com 32 observações e 11 variáveis numéricas.

.left-column[
- mpg

- cyl

- disp

- hp

- drat 

- wt

- qsec

- vs

- am

- gear

- carb

]
.right-column[
milhas(EUA) por galão

número de cilindros

cilindrada

potência do motor (cavalos de força)

relação do eixo traseiro

peso (1000 libras)

tempo para percorrer 1/4 de milha

motor (0 = V; 1 = reto)

transmisão (0 = automática; 1 = manual)

número de marchas

número de carburadores


]
---
## Carregando dados

Carregue o conjunto de dados com:

```{r}
data(mtcars)
```

Leia as 6 primeiras linhas:

```{r}
head(mtcars)
```

---
# Análise descritiva

Podemos acessar algumas informações sobre o conjunto de dados `mtcars`com:

```{r eval=FALSE}
help(mtcars)  #Documentação sobre o conjunto de dados

dim(mtcars)   #Dimensão do conjunto de dados

names(mtcars) #Nome das variáveis (colunas)
```

Vamos criar um objeto chamado `carros` e selecionar algumas variáveis do conjunto `mtcars` para compor o novo conjunto


```{r}
carros = mtcars[, c(1, 2, 3, 4, 6, 8, 9, 11)] #Selcionadas as colunas 1, 2, 3, 4, 6, 8, 9 e 11 e todas as observações
head(carros)
```

---
## Análise descritiva

A função `search()` mostra o caminho de procura do `R`. Quando executada, essa função mostra o `.GlobalEnv`, pacotes, autoloads ou `data frames` e listas adicionadas com a função `attach()`.

Para ver os objetos "atachados", digite:

```{r}
search()
```

Quando precisamos fazer muitas referências para um objeto, é possível minimizar a digitação, colocando o `data frame` ou lista no caminho de procura, pela função attach. 

---
## Análise descritiva
Perceba que o objeto `carros` não apareceu na lista de objetos "atachados". Se quisermos calcular algumas estatísticas do peso dos carros, usando diretamente a variável `wt`, surgirá uma mensagem de erro:

```{r error=TRUE}
summary(wt)
```

Para executar o sumário sem acrescentar `carros` no caminho de procura, temos que o usar o símbolo `$` entre a base de dados e a coluna (variável) de interesse:

```{r}
summary(carros$wt)
```

---
## Análise descritiva

"Atachando" a base `carros`, podemos visualizá-la no caminho de procura do `R`.

```{r}
attach(carros)
search()
```

Agora, podemos reduzir a digitação para calcular o sumário da variável peso (`wt`)

```{r}
summary(wt)
```
---
## Análise descritiva

.pull-left[
Usamos a função `table` para gerar frequências por quantidade de carburador


```{r}
tabela.carb <- table(carb)
tabela.carb
```


Tabela de freqências relativas
```{r}
tabela.carb/length(carb)
```
]

.pull-right[
Ou usando a função `prop.table`
```{r}
prop.table(tabela.carb)
```

]

---
## Análise descritiva
Tabela de frequências para o peso com intervalos, usando a função `cut`

```{r fig.height=2}

table(cut(wt, br = seq(1.5, 5.5, 0.8)))

```

E outras estatísticas

```{r collapse = TRUE}
median(wt)           #Mediana
mean(wt)             #Média
sd(wt)               #Desvio padrão
sd(wt)/mean(wt)*100  #Coeficiente de variação
```

---
## Análise descritiva

.pull-left[
Gráfico de setores
```{r fig.height=5.5}
pie(tabela.carb)

```
]

.pull-right[
Gráfico de barras

```{r fig.height=5.5}
barplot(tabela.carb)

```
]

---
## Análise descritiva

Histograma e boxplot

.pull-left[
Histograma
```{r fig.height=5.2}
hist(wt)
```
]

.pull-right[
Boxplot
```{r fig.height=5.2}
boxplot(wt)
```
]


---
# Referências

```{r refs, echo=FALSE, results="asis"}
RefManageR::PrintBibliography(referencias)
```
